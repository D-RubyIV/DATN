import{cp as T,cq as j,cr as w,cs as Y,r as u,j as a,as as E}from"./index-CmnZOBjS.js";import{I as L}from"./index.esm-8jSFQibs.js";import{I as M}from"./index-D_22Nu5E.js";function te(t,e){const r=()=>Y(e==null?void 0:e.in,NaN),s=R(t);let c;if(s.date){const o=Z(s.date,2);c=W(o.restDateString,o.year)}if(!c||isNaN(+c))return r();const m=+c;let f=0,l;if(s.time&&(f=A(s.time),isNaN(f)))return r();if(s.timezone){if(l=H(s.timezone),isNaN(l))return r()}else{const o=new Date(m+f),d=T(0,e==null?void 0:e.in);return d.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),d.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),d}return T(m+f+l,e==null?void 0:e.in)}const p={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},P=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,F=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,O=/^([+-])(\d{2})(?::?(\d{2}))?$/;function R(t){const e={},r=t.split(p.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],p.timeZoneDelimiter.test(e.date)&&(e.date=t.split(p.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const s=p.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function Z(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,c=n[2]?parseInt(n[2]):null;return{year:c===null?s:c*100,restDateString:t.slice((n[1]||n[2]).length)}}function W(t,e){if(e===null)return new Date(NaN);const r=t.match(P);if(!r)return new Date(NaN);const n=!!r[4],s=h(r[1]),c=h(r[2])-1,m=h(r[3]),f=h(r[4]),l=h(r[5])-1;if(n)return G(e,f,l)?_(e,f,l):new Date(NaN);{const o=new Date(0);return!J(e,c,m)||!B(e,s)?new Date(NaN):(o.setUTCFullYear(e,c,Math.max(s,m)),o)}}function h(t){return t?parseInt(t):1}function A(t){const e=t.match(F);if(!e)return NaN;const r=y(e[1]),n=y(e[2]),s=y(e[3]);return K(r,n,s)?r*j+n*w+s*1e3:NaN}function y(t){return t&&parseFloat(t.replace(",","."))||0}function H(t){if(t==="Z")return 0;const e=t.match(O);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Q(n,s)?r*(n*j+s*w):NaN}function _(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,c=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+c),n}const q=[31,null,31,30,31,30,31,31,30,31,30,31];function S(t){return t%400===0||t%4===0&&t%100!==0}function J(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(q[e]||(S(t)?29:28))}function B(t,e){return e>=1&&e<=(S(t)?366:365)}function G(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function K(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function Q(t,e){return e>=0&&e<=59}const re=({onSelectedCustomersChange:t,selectedCustomerIds:e})=>{const[r,n]=u.useState([]),[s,c]=u.useState(!0),[m,f]=u.useState(e),[l,o]=u.useState(""),[d,D]=u.useState(1),[N,k]=u.useState(0),v=10;u.useEffect(()=>{(async()=>{c(!0);try{const x=await E.get(`/customer?page=${d}&size=${v}`),{content:b,totalPages:z}=x.data;n(b.map(g=>({id:g.id,name:g.name,email:g.email,phone:g.phone}))),k(z)}catch(x){console.error("Error fetching customers:",x)}finally{c(!1)}})()},[d]);const U=u.useCallback(i=>{f(x=>x.includes(i)?x.filter(b=>b!==i):[...x,i])},[]);u.useEffect(()=>{f(e)},[e]),u.useEffect(()=>{if(m.length===e.length)return;const i=r.filter(x=>m.includes(x.id));t(i)},[m,r,t]);const I=i=>{o(i.target.value),D(1)},$=u.useMemo(()=>r.filter(i=>(i.name??"").toLowerCase().includes(l.toLowerCase())||(i.email??"").toLowerCase().includes(l.toLowerCase())),[r,l]),C=i=>{i>=1&&i<=N&&D(i)};return a.jsxs("div",{className:"overflow-x-auto",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{style:{position:"relative",width:"500px"},children:[a.jsx(L,{style:{color:"black",position:"absolute",left:"5px",top:"50%",transform:"translateY(-50%)",fontSize:"20px",pointerEvents:"none"}}),a.jsx(M,{placeholder:"Tìm kiếm theo tên, email, số điện thoại,...",style:{width:"100%",height:"37px",paddingLeft:"30px",boxSizing:"border-box"},value:l,onChange:I})]})}),s?a.jsx("p",{className:"text-gray-500",children:"Loading customers..."}):a.jsxs("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden",children:[a.jsx("thead",{className:"bg-gradient-to-b from-gray-100 to-gray-200 border-b-2 border-gray-300",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider w-16",children:"Chọn"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Tên"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Số điện thoại"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(i=>a.jsxs("tr",{className:"hover:bg-gray-50 transition duration-200 ease-in-out border-b last:border-b-0 border-gray-200",children:[a.jsx("td",{className:"px-4 py-3 text-center",children:a.jsx("input",{type:"checkbox",checked:m.includes(i.id),onChange:()=>U(i.id),className:"form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-400"})}),a.jsx("td",{className:"border-b border-gray-300 px-4 py-2",children:i.name||"N/A"}),a.jsx("td",{className:"border-b border-gray-300 px-4 py-2",children:i.email||"N/A"}),a.jsx("td",{className:"border-b border-gray-300 px-4 py-2",children:i.phone||"N/A"})]},i.id))})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[a.jsx("div",{onClick:()=>C(d-1),className:`cursor-pointer ${d===1?"text-gray-400":"text-blue-600"}`,children:"Trước"}),a.jsx("span",{children:`Trang ${d} trên ${N}`}),a.jsx("div",{onClick:()=>C(d+1),className:`cursor-pointer ${d===N?"text-gray-400":"text-blue-600"}`,children:"Sau"})]})]})};export{re as C,te as p};
