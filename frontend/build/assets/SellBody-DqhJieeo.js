import{r as a,cP as T,aI as w,bc as I,as as x,j as e,ap as S,B as o,aM as k,c0 as h,aQ as E,U as O,aJ as B,cn as i,co as H}from"./index-BTLFdfuL.js";import{D as A}from"./DoubleSidedImage-CTHkeOs3.js";const{TabNav:D,TabList:L,TabContent:Q}=h,q=()=>{const[r,c]=a.useState(""),{tabs:t,createTab:u,removeTabAndCancel:m}=T(),[g,K]=a.useState(!1),{openNotification:j}=w(),[l,f]=a.useState([]),{isLoadingComponent:p}=I(),d=s=>{typeof s!="string"?s.then(n=>{i.remove(n)}):i.remove(s)},v=async s=>{const n=i.push(e.jsxs(H,{title:"Thông báo",duration:8e3,children:[e.jsx("div",{children:"Số lượng trong kho sẽ được hoàn lại Vui lòng xác nhận hủy hóa đơn này?"}),e.jsxs("div",{className:"text-right mt-3",children:[e.jsx(o,{size:"sm",variant:"solid",className:"mr-2 bg-red-600",onClick:async()=>{d(n),m(s)},children:"Xác nhận"}),e.jsx(o,{size:"sm",onClick:()=>d(n),children:"Hủy"})]})]}))};a.useEffect(()=>{t.length>0&&c(t[t.length-1].value)},[t]),a.useEffect(()=>{y()},[r,t,p]);const y=async()=>{const s=t.map(n=>n.orderId);await x.get(`/orders/count-order-detail?ids=${s}`).then(function(n){f(n.data)})},N=async()=>{const s={name:"Hoa Don",address:"",phone:"",deleted:!1,total:0,subTotal:0,voucher:null,type:"INSTORE"};try{return(await x.post("/orders",s)).data}catch(n){throw console.error("Error creating new order:",n),n}},b=async()=>{const s=await N();if(t.length>=10){j("Bạn không thể tạo quá 5 đơn hàng.","Thông báo","warning");return}else u(s.id)};return a.useEffect(()=>{console.log("Current Tab: ",r)},[r]),e.jsx("div",{children:e.jsxs(S,{loading:g,type:"cover",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"font-semibold text-xl text-black text-transform: uppercase",children:"Quản lý bán hàng"})}),e.jsx("div",{children:e.jsx(o,{variant:"default",icon:e.jsx(k,{}),onClick:b,children:"Tạo đơn hàng mới"})})]}),t.length>0?e.jsxs(h,{value:r,onChange:s=>c(s),children:[e.jsx(L,{className:"flex justify-between py-2",children:e.jsx("div",{className:"flex",children:t.map(s=>{var n;return e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(E,{className:"mr-1",content:Array.isArray(l)&&((n=l.find(C=>C.id===s.orderId))==null?void 0:n.quantity),innerClass:"bg-red-50 text-red-500",children:e.jsxs(D,{value:s.value,icon:e.jsx(O,{}),className:`${r===s.value?"text-[15px]":""} !p-1`,children:[s.label," - HD",s.orderId]})}),e.jsx(B,{className:"text-gray-800 text-[18px] hover:text-red-500 transition-all duration-500",onClick:()=>v(s.orderId)}),e.jsx("div",{children:e.jsx("p",{children:" | "})})]},s.value)})})}),e.jsx("div",{className:"py-1",children:t.map((s,n)=>e.jsx(Q,{value:s.value,children:s.content},n))})]}):e.jsx(z,{})]})})},z=()=>e.jsx("div",{className:"h-[760px] flex justify-center items-center",children:e.jsxs("div",{className:"flex justify-center items-center flex-col",children:[e.jsx(A,{src:"/img/others/image-removebg-preview-order-empty.png",darkModeSrc:"/img/others/image-removebg-preview-order-empty.png",alt:"No user found!"}),e.jsx("div",{className:"py-3 font-semibold",children:e.jsx("p",{className:"text-xl",children:"Không có bất kì đơn hàng nào !!!"})})]})}),R=()=>e.jsx(e.Fragment,{children:e.jsx(q,{})});export{R as default};
