import{cS as R,cT as he,bW as Ct,bY as xt,cd as fe,n as X,j as i,aO as at,aA as J,aC as oe,B as te,aE as $,r as N,aB as ne,ci as Dt,cV as Zt,cW as en,cX as ut,b7 as tn,cY as nn,bt as wt,cZ as an,bo as sn,at as V,bF as qe,ax as rn,cm as ce,ay as on,az as ln,ap as cn,i as gt,bG as dn,aQ as un,b6 as gn,T as ht,aK as hn,cU as fn,cf as mn,b1 as pn,b5 as yn,ce as bn,c_ as Cn}from"./index-BUuDiwj7.js";import{c as xn,d as Dn,e as wn,f as Sn,g as jn,h as Nn,i as vn,j as En,k as An,l as Tn,m as In,n as Pn,o as kn,p as Bn,q as Ln,r as Mn,s as Rn,t as zn,u as Fn,v as _n,w as Un,x as Kn,y as Vn,z as $n,A as qn,B as Hn,C as On,D as Gn}from"./ProductSalesService-Dg1nNcHm.js";import{u as be,b as Qn,R as Jn,a as Yn}from"./xlsx-DtECuRan.js";import{F as Xn}from"./FileSaver.min-CghClQV8.js";import{h as me,k as Wn}from"./ClassicLayout-CYxuLII9.js";import{D as Me}from"./DoubleSidedImage-ARdYvLB2.js";import{S as Zn}from"./StickyFooter-BS3oJDzh.js";import{C as ea}from"./react-select-creatable.esm-XbbhFmWX.js";var pe={},ta=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},St={},U={};let st;const na=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];U.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};U.getSymbolTotalCodewords=function(e){return na[e]};U.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};U.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');st=e};U.isKanjiModeEnabled=function(){return typeof st<"u"};U.toSJIS=function(e){return st(e)};var Fe={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,n){if(t.isValid(r))return r;try{return e(r)}catch{return n}}})(Fe);function jt(){this.buffer=[],this.length=0}jt.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let a=0;a<e;a++)this.putBit((t>>>e-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var aa=jt;function ye(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ye.prototype.set=function(t,e,a,r){const n=t*this.size+e;this.data[n]=a,r&&(this.reservedBit[n]=!0)};ye.prototype.get=function(t,e){return this.data[t*this.size+e]};ye.prototype.xor=function(t,e,a){this.data[t*this.size+e]^=a};ye.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var sa=ye,Nt={};(function(t){const e=U.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const n=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*n-2))*2,l=[s-7];for(let c=1;c<n-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(r){const n=[],s=t.getRowColCoords(r),o=s.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||n.push([s[l],s[c]]);return n}})(Nt);var vt={};const ra=U.getSymbolSize,ft=7;vt.getPositions=function(e){const a=ra(e);return[[0,0],[a-ft,0],[0,a-ft]]};var Et={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const s=n.size;let o=0,l=0,c=0,d=null,h=null;for(let p=0;p<s;p++){l=c=0,d=h=null;for(let m=0;m<s;m++){let f=n.get(p,m);f===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=f,l=1),f=n.get(m,p),f===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=f,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(n){const s=n.size;let o=0;for(let l=0;l<s-1;l++)for(let c=0;c<s-1;c++){const d=n.get(l,c)+n.get(l,c+1)+n.get(l+1,c)+n.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},t.getPenaltyN3=function(n){const s=n.size;let o=0,l=0,c=0;for(let d=0;d<s;d++){l=c=0;for(let h=0;h<s;h++)l=l<<1&2047|n.get(d,h),h>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|n.get(h,d),h>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(n){let s=0;const o=n.data.length;for(let c=0;c<o;c++)s+=n.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function a(r,n,s){switch(r){case t.Patterns.PATTERN000:return(n+s)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(n+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return n*s%2+n*s%3===0;case t.Patterns.PATTERN110:return(n*s%2+n*s%3)%2===0;case t.Patterns.PATTERN111:return(n*s%3+(n+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(n,s){const o=s.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)s.isReserved(c,l)||s.xor(c,l,a(n,c,l))},t.getBestMask=function(n,s){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){s(d),t.applyMask(d,n);const h=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(d,n),h<c&&(c=h,l=d)}return l}})(Et);var _e={};const Y=Fe,Ce=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],xe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];_e.getBlocksCount=function(e,a){switch(a){case Y.L:return Ce[(e-1)*4+0];case Y.M:return Ce[(e-1)*4+1];case Y.Q:return Ce[(e-1)*4+2];case Y.H:return Ce[(e-1)*4+3];default:return}};_e.getTotalCodewordsCount=function(e,a){switch(a){case Y.L:return xe[(e-1)*4+0];case Y.M:return xe[(e-1)*4+1];case Y.Q:return xe[(e-1)*4+2];case Y.H:return xe[(e-1)*4+3];default:return}};var At={},Ue={};const de=new Uint8Array(512),Re=new Uint8Array(256);(function(){let e=1;for(let a=0;a<255;a++)de[a]=e,Re[e]=a,e<<=1,e&256&&(e^=285);for(let a=255;a<512;a++)de[a]=de[a-255]})();Ue.log=function(e){if(e<1)throw new Error("log("+e+")");return Re[e]};Ue.exp=function(e){return de[e]};Ue.mul=function(e,a){return e===0||a===0?0:de[Re[e]+Re[a]]};(function(t){const e=Ue;t.mul=function(r,n){const s=new Uint8Array(r.length+n.length-1);for(let o=0;o<r.length;o++)for(let l=0;l<n.length;l++)s[o+l]^=e.mul(r[o],n[l]);return s},t.mod=function(r,n){let s=new Uint8Array(r);for(;s.length-n.length>=0;){const o=s[0];for(let c=0;c<n.length;c++)s[c]^=e.mul(n[c],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},t.generateECPolynomial=function(r){let n=new Uint8Array([1]);for(let s=0;s<r;s++)n=t.mul(n,new Uint8Array([1,e.exp(s)]));return n}})(At);const Tt=At;function rt(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}rt.prototype.initialize=function(e){this.degree=e,this.genPoly=Tt.generateECPolynomial(this.degree)};rt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(e.length+this.degree);a.set(e);const r=Tt.mod(a,this.genPoly),n=this.degree-r.length;if(n>0){const s=new Uint8Array(this.degree);return s.set(r,n),s}return r};var ia=rt,It={},W={},it={};it.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var G={};const Pt="[0-9]+",oa="[A-Z $%*+\\-./:]+";let ge="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ge=ge.replace(/u/g,"\\u");const la="(?:(?![A-Z0-9 $%*+\\-./:]|"+ge+`)(?:.|[\r
]))+`;G.KANJI=new RegExp(ge,"g");G.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");G.BYTE=new RegExp(la,"g");G.NUMERIC=new RegExp(Pt,"g");G.ALPHANUMERIC=new RegExp(oa,"g");const ca=new RegExp("^"+ge+"$"),da=new RegExp("^"+Pt+"$"),ua=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");G.testKanji=function(e){return ca.test(e)};G.testNumeric=function(e){return da.test(e)};G.testAlphanumeric=function(e){return ua.test(e)};(function(t){const e=it,a=G;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return a.testNumeric(s)?t.NUMERIC:a.testAlphanumeric(s)?t.ALPHANUMERIC:a.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(s,o){if(t.isValid(s))return s;try{return r(s)}catch{return o}}})(W);(function(t){const e=U,a=_e,r=Fe,n=W,s=it,o=7973,l=e.getBCHDigit(o);function c(m,f,b){for(let C=1;C<=40;C++)if(f<=t.getCapacity(C,b,m))return C}function d(m,f){return n.getCharCountIndicator(m,f)+4}function h(m,f){let b=0;return m.forEach(function(C){const I=d(C.mode,f);b+=I+C.getBitsLength()}),b}function p(m,f){for(let b=1;b<=40;b++)if(h(m,b)<=t.getCapacity(b,f,n.MIXED))return b}t.from=function(f,b){return s.isValid(f)?parseInt(f,10):b},t.getCapacity=function(f,b,C){if(!s.isValid(f))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=n.BYTE);const I=e.getSymbolTotalCodewords(f),y=a.getTotalCodewordsCount(f,b),S=(I-y)*8;if(C===n.MIXED)return S;const u=S-d(C,f);switch(C){case n.NUMERIC:return Math.floor(u/10*3);case n.ALPHANUMERIC:return Math.floor(u/11*2);case n.KANJI:return Math.floor(u/13);case n.BYTE:default:return Math.floor(u/8)}},t.getBestVersionForData=function(f,b){let C;const I=r.from(b,r.M);if(Array.isArray(f)){if(f.length>1)return p(f,I);if(f.length===0)return 1;C=f[0]}else C=f;return c(C.mode,C.getLength(),I)},t.getEncodedBits=function(f){if(!s.isValid(f)||f<7)throw new Error("Invalid QR Code version");let b=f<<12;for(;e.getBCHDigit(b)-l>=0;)b^=o<<e.getBCHDigit(b)-l;return f<<12|b}})(It);var kt={};const Xe=U,Bt=1335,ga=21522,mt=Xe.getBCHDigit(Bt);kt.getEncodedBits=function(e,a){const r=e.bit<<3|a;let n=r<<10;for(;Xe.getBCHDigit(n)-mt>=0;)n^=Bt<<Xe.getBCHDigit(n)-mt;return(r<<10|n)^ga};var Lt={};const ha=W;function ae(t){this.mode=ha.NUMERIC,this.data=t.toString()}ae.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};ae.prototype.getLength=function(){return this.data.length};ae.prototype.getBitsLength=function(){return ae.getBitsLength(this.data.length)};ae.prototype.write=function(e){let a,r,n;for(a=0;a+3<=this.data.length;a+=3)r=this.data.substr(a,3),n=parseInt(r,10),e.put(n,10);const s=this.data.length-a;s>0&&(r=this.data.substr(a),n=parseInt(r,10),e.put(n,s*3+1))};var fa=ae;const ma=W,He=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function se(t){this.mode=ma.ALPHANUMERIC,this.data=t}se.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};se.prototype.getLength=function(){return this.data.length};se.prototype.getBitsLength=function(){return se.getBitsLength(this.data.length)};se.prototype.write=function(e){let a;for(a=0;a+2<=this.data.length;a+=2){let r=He.indexOf(this.data[a])*45;r+=He.indexOf(this.data[a+1]),e.put(r,11)}this.data.length%2&&e.put(He.indexOf(this.data[a]),6)};var pa=se;const ya=W;function re(t){this.mode=ya.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}re.getBitsLength=function(e){return e*8};re.prototype.getLength=function(){return this.data.length};re.prototype.getBitsLength=function(){return re.getBitsLength(this.data.length)};re.prototype.write=function(t){for(let e=0,a=this.data.length;e<a;e++)t.put(this.data[e],8)};var ba=re;const Ca=W,xa=U;function ie(t){this.mode=Ca.KANJI,this.data=t}ie.getBitsLength=function(e){return e*13};ie.prototype.getLength=function(){return this.data.length};ie.prototype.getBitsLength=function(){return ie.getBitsLength(this.data.length)};ie.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let a=xa.toSJIS(this.data[e]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var Da=ie,Mt={exports:{}};(function(t){var e={single_source_shortest_paths:function(a,r,n){var s={},o={};o[r]=0;var l=e.PriorityQueue.make();l.push(r,0);for(var c,d,h,p,m,f,b,C,I;!l.empty();){c=l.pop(),d=c.value,p=c.cost,m=a[d]||{};for(h in m)m.hasOwnProperty(h)&&(f=m[h],b=p+f,C=o[h],I=typeof o[h]>"u",(I||C>b)&&(o[h]=b,l.push(h,b),s[h]=d))}if(typeof n<"u"&&typeof o[n]>"u"){var y=["Could not find a path from ",r," to ",n,"."].join("");throw new Error(y)}return s},extract_shortest_path_from_predecessor_list:function(a,r){for(var n=[],s=r;s;)n.push(s),a[s],s=a[s];return n.reverse(),n},find_path:function(a,r,n){var s=e.single_source_shortest_paths(a,r,n);return e.extract_shortest_path_from_predecessor_list(s,n)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,n={},s;a=a||{};for(s in r)r.hasOwnProperty(s)&&(n[s]=r[s]);return n.queue=[],n.sorter=a.sorter||r.default_sorter,n},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var n={value:a,cost:r};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Mt);var wa=Mt.exports;(function(t){const e=W,a=fa,r=pa,n=ba,s=Da,o=G,l=U,c=wa;function d(y){return unescape(encodeURIComponent(y)).length}function h(y,S,u){const g=[];let x;for(;(x=y.exec(u))!==null;)g.push({data:x[0],index:x.index,mode:S,length:x[0].length});return g}function p(y){const S=h(o.NUMERIC,e.NUMERIC,y),u=h(o.ALPHANUMERIC,e.ALPHANUMERIC,y);let g,x;return l.isKanjiModeEnabled()?(g=h(o.BYTE,e.BYTE,y),x=h(o.KANJI,e.KANJI,y)):(g=h(o.BYTE_KANJI,e.BYTE,y),x=[]),S.concat(u,g,x).sort(function(v,P){return v.index-P.index}).map(function(v){return{data:v.data,mode:v.mode,length:v.length}})}function m(y,S){switch(S){case e.NUMERIC:return a.getBitsLength(y);case e.ALPHANUMERIC:return r.getBitsLength(y);case e.KANJI:return s.getBitsLength(y);case e.BYTE:return n.getBitsLength(y)}}function f(y){return y.reduce(function(S,u){const g=S.length-1>=0?S[S.length-1]:null;return g&&g.mode===u.mode?(S[S.length-1].data+=u.data,S):(S.push(u),S)},[])}function b(y){const S=[];for(let u=0;u<y.length;u++){const g=y[u];switch(g.mode){case e.NUMERIC:S.push([g,{data:g.data,mode:e.ALPHANUMERIC,length:g.length},{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.ALPHANUMERIC:S.push([g,{data:g.data,mode:e.BYTE,length:g.length}]);break;case e.KANJI:S.push([g,{data:g.data,mode:e.BYTE,length:d(g.data)}]);break;case e.BYTE:S.push([{data:g.data,mode:e.BYTE,length:d(g.data)}])}}return S}function C(y,S){const u={},g={start:{}};let x=["start"];for(let D=0;D<y.length;D++){const v=y[D],P=[];for(let k=0;k<v.length;k++){const B=v[k],q=""+D+k;P.push(q),u[q]={node:B,lastCount:0},g[q]={};for(let Z=0;Z<x.length;Z++){const z=x[Z];u[z]&&u[z].node.mode===B.mode?(g[z][q]=m(u[z].lastCount+B.length,B.mode)-m(u[z].lastCount,B.mode),u[z].lastCount+=B.length):(u[z]&&(u[z].lastCount=B.length),g[z][q]=m(B.length,B.mode)+4+e.getCharCountIndicator(B.mode,S))}}x=P}for(let D=0;D<x.length;D++)g[x[D]].end=0;return{map:g,table:u}}function I(y,S){let u;const g=e.getBestModeForData(y);if(u=e.from(S,g),u!==e.BYTE&&u.bit<g.bit)throw new Error('"'+y+'" cannot be encoded with mode '+e.toString(u)+`.
 Suggested mode is: `+e.toString(g));switch(u===e.KANJI&&!l.isKanjiModeEnabled()&&(u=e.BYTE),u){case e.NUMERIC:return new a(y);case e.ALPHANUMERIC:return new r(y);case e.KANJI:return new s(y);case e.BYTE:return new n(y)}}t.fromArray=function(S){return S.reduce(function(u,g){return typeof g=="string"?u.push(I(g,null)):g.data&&u.push(I(g.data,g.mode)),u},[])},t.fromString=function(S,u){const g=p(S,l.isKanjiModeEnabled()),x=b(g),D=C(x,u),v=c.find_path(D.map,"start","end"),P=[];for(let k=1;k<v.length-1;k++)P.push(D.table[v[k]].node);return t.fromArray(f(P))},t.rawSplit=function(S){return t.fromArray(p(S,l.isKanjiModeEnabled()))}})(Lt);const Ke=U,Oe=Fe,Sa=aa,ja=sa,Na=Nt,va=vt,We=Et,Ze=_e,Ea=ia,ze=It,Aa=kt,Ta=W,Ge=Lt;function Ia(t,e){const a=t.size,r=va.getPositions(e);for(let n=0;n<r.length;n++){const s=r[n][0],o=r[n][1];for(let l=-1;l<=7;l++)if(!(s+l<=-1||a<=s+l))for(let c=-1;c<=7;c++)o+c<=-1||a<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(s+l,o+c,!0,!0):t.set(s+l,o+c,!1,!0))}}function Pa(t){const e=t.size;for(let a=8;a<e-8;a++){const r=a%2===0;t.set(a,6,r,!0),t.set(6,a,r,!0)}}function ka(t,e){const a=Na.getPositions(e);for(let r=0;r<a.length;r++){const n=a[r][0],s=a[r][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(n+o,s+l,!0,!0):t.set(n+o,s+l,!1,!0)}}function Ba(t,e){const a=t.size,r=ze.getEncodedBits(e);let n,s,o;for(let l=0;l<18;l++)n=Math.floor(l/3),s=l%3+a-8-3,o=(r>>l&1)===1,t.set(n,s,o,!0),t.set(s,n,o,!0)}function Qe(t,e,a){const r=t.size,n=Aa.getEncodedBits(e,a);let s,o;for(s=0;s<15;s++)o=(n>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}function La(t,e){const a=t.size;let r=-1,n=a-1,s=7,o=0;for(let l=a-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(n,l-c)){let d=!1;o<e.length&&(d=(e[o]>>>s&1)===1),t.set(n,l-c,d),s--,s===-1&&(o++,s=7)}if(n+=r,n<0||a<=n){n-=r,r=-r;break}}}function Ma(t,e,a){const r=new Sa;a.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),Ta.getCharCountIndicator(c.mode,t)),c.write(r)});const n=Ke.getSymbolTotalCodewords(t),s=Ze.getTotalCodewordsCount(t,e),o=(n-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(o-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return Ra(r,t,e)}function Ra(t,e,a){const r=Ke.getSymbolTotalCodewords(e),n=Ze.getTotalCodewordsCount(e,a),s=r-n,o=Ze.getBlocksCount(e,a),l=r%o,c=o-l,d=Math.floor(r/o),h=Math.floor(s/o),p=h+1,m=d-h,f=new Ea(m);let b=0;const C=new Array(o),I=new Array(o);let y=0;const S=new Uint8Array(t.buffer);for(let v=0;v<o;v++){const P=v<c?h:p;C[v]=S.slice(b,b+P),I[v]=f.encode(C[v]),b+=P,y=Math.max(y,P)}const u=new Uint8Array(r);let g=0,x,D;for(x=0;x<y;x++)for(D=0;D<o;D++)x<C[D].length&&(u[g++]=C[D][x]);for(x=0;x<m;x++)for(D=0;D<o;D++)u[g++]=I[D][x];return u}function za(t,e,a,r){let n;if(Array.isArray(t))n=Ge.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const h=Ge.rawSplit(t);d=ze.getBestVersionForData(h,a)}n=Ge.fromString(t,d||40)}else throw new Error("Invalid data");const s=ze.getBestVersionForData(n,a);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=Ma(e,a,n),l=Ke.getSymbolSize(e),c=new ja(l);return Ia(c,e),Pa(c),ka(c,e),Qe(c,a,0),e>=7&&Ba(c,e),La(c,o),isNaN(r)&&(r=We.getBestMask(c,Qe.bind(null,c,a))),We.applyMask(r,c),Qe(c,a,r),{modules:c,version:e,errorCorrectionLevel:a,maskPattern:r,segments:n}}St.create=function(e,a){if(typeof e>"u"||e==="")throw new Error("No input text");let r=Oe.M,n,s;return typeof a<"u"&&(r=Oe.from(a.errorCorrectionLevel,Oe.M),n=ze.from(a.version),s=We.from(a.maskPattern),a.toSJISFunc&&Ke.setToSJISFunction(a.toSJISFunc)),za(e,n,r,s)};var Rt={},ot={};(function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const n=parseInt(r.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const n=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:n,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,n){return n.width&&n.width>=r+n.margin*2?n.width/(r+n.margin*2):n.scale},t.getImageWidth=function(r,n){const s=t.getScale(r,n);return Math.floor((r+n.margin*2)*s)},t.qrToImageData=function(r,n,s){const o=n.modules.size,l=n.modules.data,c=t.getScale(o,s),d=Math.floor((o+s.margin*2)*c),h=s.margin*c,p=[s.color.light,s.color.dark];for(let m=0;m<d;m++)for(let f=0;f<d;f++){let b=(m*d+f)*4,C=s.color.light;if(m>=h&&f>=h&&m<d-h&&f<d-h){const I=Math.floor((m-h)/c),y=Math.floor((f-h)/c);C=p[l[I*o+y]?1:0]}r[b++]=C.r,r[b++]=C.g,r[b++]=C.b,r[b]=C.a}}})(ot);(function(t){const e=ot;function a(n,s,o){n.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=r()),c=e.getOptions(c);const h=e.getImageWidth(s.modules.size,c),p=d.getContext("2d"),m=p.createImageData(h,h);return e.qrToImageData(m.data,s,c),a(p,d,h),p.putImageData(m,0,0),d},t.renderToDataURL=function(s,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=t.render(s,o,c),h=c.type||"image/png",p=c.rendererOpts||{};return d.toDataURL(h,p.quality)}})(Rt);var zt={};const Fa=ot;function pt(t,e){const a=t.a/255,r=e+'="'+t.hex+'"';return a<1?r+" "+e+'-opacity="'+a.toFixed(2).slice(1)+'"':r}function Je(t,e,a){let r=t+e;return typeof a<"u"&&(r+=" "+a),r}function _a(t,e,a){let r="",n=0,s=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),d=Math.floor(l/e);!c&&!s&&(s=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(r+=s?Je("M",c+a,.5+d+a):Je("m",n,0),n=0,s=!1),c+1<e&&t[l+1]||(r+=Je("h",o),o=0)):n++}return r}zt.render=function(e,a,r){const n=Fa.getOptions(a),s=e.modules.size,o=e.modules.data,l=s+n.margin*2,c=n.color.light.a?"<path "+pt(n.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+pt(n.color.dark,"stroke")+' d="'+_a(o,s,n.margin)+'"/>',h='viewBox="0 0 '+l+" "+l+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof r=="function"&&r(null,m),m};const Ua=ta,et=St,Ft=Rt,Ka=zt;function lt(t,e,a,r,n){const s=[].slice.call(arguments,1),o=s.length,l=typeof s[o-1]=="function";if(!l&&!Ua())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(n=a,a=e,e=r=void 0):o===3&&(e.getContext&&typeof n>"u"?(n=r,r=void 0):(n=r,r=a,a=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(a=e,e=r=void 0):o===2&&!e.getContext&&(r=a,a=e,e=void 0),new Promise(function(c,d){try{const h=et.create(a,r);c(t(h,e,r))}catch(h){d(h)}})}try{const c=et.create(a,r);n(null,t(c,e,r))}catch(c){n(c)}}pe.create=et.create;pe.toCanvas=lt.bind(null,Ft.render);pe.toDataURL=lt.bind(null,Ft.renderToDataURL);pe.toString=lt.bind(null,function(t,e,a){return Ka.render(t,a)});const _t="salesProductDetailList",ee=R(_t+"/getProductDetails",async(t,{getState:e})=>{const a=e(),r={productId:a.salesProductDetailList.data.productId,size:a.salesProductDetailList.data.filterData.size,color:a.salesProductDetailList.data.filterData.color,style:a.salesProductDetailList.data.filterData.style,texture:a.salesProductDetailList.data.filterData.texture,origin:a.salesProductDetailList.data.filterData.origin,brand:a.salesProductDetailList.data.filterData.brand,collar:a.salesProductDetailList.data.filterData.collar,sleeve:a.salesProductDetailList.data.filterData.sleeve,material:a.salesProductDetailList.data.filterData.material,thickness:a.salesProductDetailList.data.filterData.thickness,elasticity:a.salesProductDetailList.data.filterData.elasticity};return(await xn(t,r)).data}),Va=async t=>(await Dn(t)).data,$a=t=>{const e=t.map((s,o)=>({STT:o+1,Code:s.code,Tên:s.product?`${s.product.name} màu ${s.color.name} (Size ${s.size.name})`:"",Size:s.size.name,Màu:s.color.name,"Thương hiệu":s.brand?s.brand.name:"","Xuất xứ":s.origin?s.origin.name:"","Kiểu dáng":s.style?s.style.name:"","Chất liệu":s.material?s.material.name:"","Kiểu cổ áo":s.collar?s.collar.name:"","Kiểu tay áo":s.sleeve?s.sleeve.name:"","Kết cấu":s.texture?s.texture.name:"","Dộ dày":s.thickness?s.thickness.name:"","Dộ co giãn":s.elasticity?s.elasticity.name:"","Khối lượng":s.mass,Giá:s.price,"Số lượng":s.quantity,"Ngày Tạo":s.createdDate,"Trạng thái":qa(s.quantity)})),a=be.json_to_sheet(e,{header:Object.keys(e[0])}),r=Object.keys(e[0]).indexOf("Trạng thái");if(r>=0)for(let s=2;s<=e.length+1;s++){const o=be.encode_cell({r:s-1,c:r}),l=a[o];l&&(l.v==="Hết hàng"?l.s={fill:{fgColor:{rgb:"FF0000"}}}:l.v==="Sắp hết"?l.s={fill:{fgColor:{rgb:"FFFF00"}}}:l.v==="Còn hàng"&&(l.s={fill:{fgColor:{rgb:"00FF00"}}}))}const n=be.book_new();be.book_append_sheet(n,a,"Product Details"),Qn(n,"ProductDetails.xlsx")},qa=t=>t===void 0||t===0?"Hết hàng":t>0&&t<=10?"Sắp hết":"Còn hàng",Ha=async t=>{try{for(const e of t){const a=e.code,r="QR_san_pham_"+(e==null?void 0:e.product.name)+"_màu_"+(e==null?void 0:e.color.name)+"(Size_"+(e==null?void 0:e.size.name)+").png",n=await pe.toDataURL(a);console.log("Tạo thành công QR cho code:",a);const s=atob(n.split(",")[1]),o=n.split(",")[0].split(":")[1].split(";")[0],l=new Uint8Array(s.length);for(let d=0;d<s.length;d++)l[d]=s.charCodeAt(d);const c=new Blob([l],{type:o});Xn.saveAs(c,r),console.log("QR code saved as file:",r)}}catch(e){console.error("Tạo và lưu QR thất bại: ",e)}},Oa={total:0,pageIndex:1,pageSize:5,query:"",sort:{order:"",key:""}},Ga={productId:55,size:"",color:"",style:"",texture:"",origin:"",brand:"",collar:"",sleeve:"",material:"",thickness:"",elasticity:""},Qa={loading:!1,deleteConfirmation:!1,selectedProductDetail:"",productDetailList:[],tableData:Oa,filterData:Ga,productId:0},Ut=he({name:`${_t}/state`,initialState:Qa,reducers:{updateProductDetailList:(t,e)=>{t.productDetailList=e.payload},setTableData:(t,e)=>{t.tableData=e.payload},setProductId:(t,e)=>{t.productId=e.payload},setFilterData:(t,e)=>{t.filterData=e.payload},toggleDeleteConfirmation:(t,e)=>{t.deleteConfirmation=e.payload},setSelectedProductDetail:(t,e)=>{t.selectedProductDetail=e.payload}},extraReducers:t=>{t.addCase(ee.fulfilled,(e,a)=>{e.productDetailList=a.payload.content,e.tableData.total=a.payload.totalElements,e.loading=!1}).addCase(ee.pending,e=>{e.loading=!0})}}),{updateProductDetailList:Us,setTableData:Ye,setProductId:Ja,toggleDeleteConfirmation:tt,setSelectedProductDetail:Ya,setFilterData:Kt}=Ut.actions,Xa=Ut.reducer,Vt="productDetailUpdate",De=R(Vt+"/getProductDetail",async t=>(await wn(t)).data),Wa=async(t,e)=>(await Sn(t,e)).data,Za={loading:!1,UpdateConfirmation:!1,productDetail:null},$t=he({name:Vt,initialState:Za,reducers:{toggleUpdateConfirmation(t,e){t.UpdateConfirmation=e.payload}},extraReducers:t=>{t.addCase(De.pending,e=>{e.loading=!0}).addCase(De.fulfilled,(e,a)=>{e.loading=!1,e.productDetail=a.payload,console.log(e.productDetail)}).addCase(De.rejected,e=>{e.loading=!1,e.productDetail=null})}}),{toggleUpdateConfirmation:qt}=$t.actions,es=$t.reducer,Ht="datas",we=R(Ht+"/getDataProductDetailQuery",async t=>(await jn(t)).data),ts={loading:!1,attributeFormData:[],error:null},ns=he({name:Ht,initialState:ts,reducers:{},extraReducers:t=>{t.addCase(we.pending,e=>{e.loading=!0}).addCase(we.fulfilled,(e,a)=>{e.loading=!1,e.attributeFormData=a.payload,console.log(e.attributeFormData)}).addCase(we.rejected,e=>{e.loading=!1,e.error="Có lỗi xảy ra khi tải dữ liệu"})}}),as=ns.reducer,ct=Ct({data:Xa,updateProductDetailed:es,DataProductDetailQuery:as}),M=xt,K="optionList",Se=R(K+"/getBrandData",async()=>(await Nn()).data),je=R(K+"/getOriginData",async()=>(await vn()).data),Ne=R(K+"/getStyleData",async()=>(await En()).data),ve=R(K+"/getCollarData",async()=>(await An()).data),Ee=R(K+"/getSleeveData",async()=>(await Tn()).data),Ae=R(K+"/getThicknessData",async()=>(await In()).data),Te=R(K+"/getTextureData",async()=>(await Pn()).data),Ie=R(K+"/getElasticityData",async()=>(await kn()).data),Pe=R(K+"/getColorData",async()=>(await Bn()).data),ke=R(K+"/getSizeData",async()=>(await Ln()).data),Be=R(K+"/getMaterialData",async()=>(await Mn()).data),Le=R(K+"/getProductData",async()=>(await Rn()).data),ss={loading:!0,brandData:[],originData:[],styleData:[],collarData:[],sleeveData:[],thicknessData:[],textureData:[],elasticityData:[],colorData:[],sizeData:[],materialData:[],productData:[]},rs=he({name:`${K}/state`,initialState:ss,reducers:{},extraReducers:t=>{t.addCase(Se.fulfilled,(e,a)=>{e.brandData=a.payload.data,e.loading=!1}).addCase(Se.pending,e=>{e.loading=!0}).addCase(Se.rejected,e=>{e.loading=!1}).addCase(je.fulfilled,(e,a)=>{e.originData=a.payload.data,e.loading=!1}).addCase(je.pending,e=>{e.loading=!0}).addCase(je.rejected,e=>{e.loading=!1}).addCase(Ne.fulfilled,(e,a)=>{e.styleData=a.payload.data,e.loading=!1}).addCase(Ne.pending,e=>{e.loading=!0}).addCase(Ne.rejected,e=>{e.loading=!1}).addCase(ve.fulfilled,(e,a)=>{e.collarData=a.payload.data,e.loading=!1}).addCase(ve.pending,e=>{e.loading=!0}).addCase(ve.rejected,e=>{e.loading=!1}).addCase(Ee.fulfilled,(e,a)=>{e.sleeveData=a.payload.data,e.loading=!1}).addCase(Ee.pending,e=>{e.loading=!0}).addCase(Ee.rejected,e=>{e.loading=!1}).addCase(Ae.fulfilled,(e,a)=>{e.thicknessData=a.payload.data,e.loading=!1}).addCase(Ae.pending,e=>{e.loading=!0}).addCase(Ae.rejected,e=>{e.loading=!1}).addCase(Te.fulfilled,(e,a)=>{e.textureData=a.payload.data,e.loading=!1}).addCase(Te.pending,e=>{e.loading=!0}).addCase(Te.rejected,e=>{e.loading=!1}).addCase(Ie.fulfilled,(e,a)=>{e.elasticityData=a.payload.data,e.loading=!1}).addCase(Ie.pending,e=>{e.loading=!0}).addCase(Ie.rejected,e=>{e.loading=!1}).addCase(Pe.fulfilled,(e,a)=>{e.colorData=a.payload.data,e.loading=!1}).addCase(Pe.pending,e=>{e.loading=!0}).addCase(Pe.rejected,e=>{e.loading=!1}).addCase(ke.fulfilled,(e,a)=>{e.sizeData=a.payload.data,e.loading=!1}).addCase(ke.pending,e=>{e.loading=!0}).addCase(ke.rejected,e=>{e.loading=!1}).addCase(Be.fulfilled,(e,a)=>{e.materialData=a.payload.data,e.loading=!1}).addCase(Be.pending,e=>{e.loading=!0}).addCase(Be.rejected,e=>{e.loading=!1}).addCase(Le.fulfilled,(e,a)=>{e.productData=a.payload.data,e.loading=!1}).addCase(Le.pending,e=>{e.loading=!0}).addCase(Le.rejected,e=>{e.loading=!1})}}),is=rs.reducer,Ot="newAttribute",ue=R(`${Ot}/newAttribute`,async({AttributeData:t,apiFunc:e})=>{const a=await e(t);if(!a||!a.data)throw new Error("Invalid response from API");return a.data}),os={loading:!1,addAttribute:!1,dataAttribute:null,labelAttribute:"",options:[]},Gt=he({name:Ot,initialState:os,reducers:{setAttributeData:(t,e)=>{t.dataAttribute=e.payload},toggleAddAttributeConfirmation:(t,e)=>{t.addAttribute=e.payload},setLabelAttribute:(t,e)=>{t.labelAttribute=e.payload}},extraReducers:t=>{t.addCase(ue.fulfilled,(e,a)=>{e.loading=!1,e.dataAttribute=a.payload,e.addAttribute=!1,e.options.push(a.payload)}).addCase(ue.pending,e=>{e.loading=!0}).addCase(ue.rejected,e=>{e.loading=!1})}}),{setAttributeData:ls,toggleAddAttributeConfirmation:nt,setLabelAttribute:cs}=Gt.actions,ds=Gt.reducer,Qt=Ct({options:is,newAttribute:ds}),dt=xt;fe("newAttribute",Qt);const us=({setFieldValue:t,updateOptions:e,...a})=>{const r=X(),{dataAttribute:n,labelAttribute:s,addAttribute:o}=dt(d=>({dataAttribute:d.newAttribute.newAttribute.dataAttribute,labelAttribute:d.newAttribute.newAttribute.labelAttribute,addAttribute:d.newAttribute.newAttribute.addAttribute})),l=d=>{r(nt(!1))},c=async()=>{let d;switch(s){case"brand":d=Gn;break;case"origin":d=On;break;case"style":d=Hn;break;case"material":d=qn;break;case"collar":d=$n;break;case"sleeve":d=Vn;break;case"texture":d=Kn;break;case"thickness":d=Un;break;case"elasticity":d=_n;break;case"size":d=Fn;break;case"color":d=zn;break;default:$.error("Không có chức năng API cho thuộc tính này.");return}if(!n){$.error(" Không có dữ liệu thuộc tính để thêm.");return}try{const h=await r(ue({AttributeData:n,apiFunc:d}));if(ue.fulfilled.match(h)){const p=h.payload,m={id:p.id,code:p.code,name:p.name,deleted:!1},f=s==="brand"||s==="origin"||s==="style"||s==="material"||s==="collar"||s==="sleeve"||s==="texture"||s==="thickness"||s==="elasticity"?s:s==="size"?"size":"color";t(f,m),e(f,m),$.success(`Thành công thêm ${s} ${m.name}.`)}else throw $.error("Lỗi khi thêm thuộc tính"),new Error("Failed to add attribute")}catch(h){const p=h instanceof Error?h.message:"Một lỗi không xác định đã xảy ra!";$.error(p)}finally{r(nt(!1))}};return i.jsxs(at,{isOpen:o,onClose:l,onRequestClose:l,children:[i.jsxs("h5",{className:"mb-4",children:["Thêm nhanh ",s]}),i.jsx(J,{label:`Tên ${s}`,children:i.jsx(oe,{placeholder:(n==null?void 0:n.name)||"",disabled:!0})}),i.jsxs("div",{className:"text-right mt-6",children:[i.jsx(te,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:l,children:"Hủy bỏ"}),i.jsx(te,{style:{backgroundColor:"rgb(79, 70, 229)",height:"40px"},variant:"solid",onClick:c,children:"Xác nhận"})]})]})},{MultiValueLabel:gs,Control:Jt}=Zt,hs=({innerProps:t,label:e,data:a,isSelected:r})=>i.jsxs("div",{className:`flex items-center justify-between p-2 ${r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...t,children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.value.name}}),i.jsx("span",{className:"ml-2 rtl:mr-2",children:e})]}),r&&i.jsx(en,{style:{color:"rgb(79, 70, 229)"},className:"text-xl"})]}),fs=({children:t,...e})=>{const{data:a}=e;return i.jsx(gs,{...e,children:i.jsxs("div",{className:"inline-flex items-center",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.value.name}}),i.jsx("span",{className:"ml-1 rtl:mr-2",children:t})]})})},ms=({children:t,...e})=>{const a=e.getValue()[0];return i.jsxs(Jt,{...e,children:[a&&i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.value.name}}),t]})},ps=({touched:t,errors:e,values:a,setFieldValue:r,data:n})=>{const s=X();dt(A=>A.newAttribute.newAttribute.addAttribute);const[o,l]=N.useState((n==null?void 0:n.brands)||[]),[c,d]=N.useState((n==null?void 0:n.origins)||[]),[h,p]=N.useState((n==null?void 0:n.styles)||[]),[m,f]=N.useState((n==null?void 0:n.materials)||[]),[b,C]=N.useState((n==null?void 0:n.collars)||[]),[I,y]=N.useState((n==null?void 0:n.sleeves)||[]),[S,u]=N.useState((n==null?void 0:n.textures)||[]),[g,x]=N.useState((n==null?void 0:n.thicknesses)||[]),[D,v]=N.useState((n==null?void 0:n.elasticities)||[]),[P,k]=N.useState((n==null?void 0:n.sizes)||[]),[B,q]=N.useState((n==null?void 0:n.colors)||[]);N.useEffect(()=>{n&&(l(n.brands||[]),d(n.origins||[]),p(n.styles||[]),f(n.materials||[]),C(n.collars||[]),y(n.sleeves||[]),u(n.textures||[]),x(n.thicknesses||[]),v(n.elasticities||[]),k(n.sizes||[]),q(n.colors||[]))},[n]);const Z=()=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from({length:5},()=>A.charAt(Math.floor(Math.random()*A.length))).join("")},z=A=>({id:Math.floor(Math.random()*1e3),code:Z(),name:A,deleted:!1}),Ve=(A,j)=>{const T=z(A);s(ls(T)),s(cs(j)),s(nt(!0))},F=(A,j,T,L=!1,w)=>{const H=A==="color";return i.jsx(J,{label:j,invalid:!!(e[A]&&t[A]),errorMessage:e[A],children:i.jsx(ne,{name:A,children:({field:E,form:Q})=>{const O=a[A],le=L&&Array.isArray(O)?T.filter(_=>O.some($e=>$e.id===_.value.id)):O&&"id"in O?[T.find(_=>_.value.id===O.id)||null]:[],Xt=L?le.filter(_=>_!==null):le.length>0?le[0]:null;return i.jsx(Dt,{isClearable:!0,componentAs:ea,isMulti:L,components:{Option:hs,MultiValueLabel:fs,Control:H?ms:Jt},onCreateOption:_=>Ve(_,A),field:E,form:Q,options:T,value:Xt,onChange:_=>{if(L){const $e=_.map(Wt=>Wt.value);Q.setFieldValue(E.name,$e)}else Q.setFieldValue(E.name,_?_.value:null)},placeholder:`Chọn ${j.toLowerCase()}...`,formatCreateLabel:_=>`Thêm nhanh "${_}"`,closeMenuOnSelect:w})}})})};return i.jsxs(me,{divider:!0,isLastChild:!0,className:"mb-4",children:[i.jsx("h5",{children:"Thuộc tính"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[" ",i.jsxs("div",{className:"col-span-1",children:[F("brand","Thương hiệu",o)," "]}),i.jsxs("div",{className:"col-span-1",children:[F("origin","Xuất xứ",c)," "]}),i.jsx("div",{className:"col-span-1",children:F("style","Kiểu dáng",h)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[" ",i.jsx("div",{className:"col-span-1",children:F("material","Chất liệu",m)}),i.jsx("div",{className:"col-span-1",children:F("collar","Kiểu cổ áo",b)}),i.jsx("div",{className:"col-span-1",children:F("sleeve","KIểu tay áo",I)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[" ",i.jsx("div",{className:"col-span-1",children:F("texture","Kết cấu",S)}),i.jsx("div",{className:"col-span-1",children:F("thickness","Độ dày",g)}),i.jsx("div",{className:"col-span-1",children:F("elasticity","Độ co giãn",D)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[" ",i.jsx("div",{className:"col-span-1",children:i.jsx(J,{label:"Khối lượng",invalid:!!(e.mass&&t.mass),errorMessage:e.mass,children:i.jsx(ne,{type:"text",autoComplete:"off",name:"mass",placeholder:"Hãy điền khối lượng...",component:oe,suffix:"gm"})})}),i.jsxs("div",{className:"col-span-1",children:[F("color","Màu sắc",B)," "]}),i.jsxs("div",{className:"col-span-1",children:[F("size","Kích thước",P)," "]})]}),i.jsx(us,{setFieldValue:r,updateOptions:(A,j)=>{A==="brand"?l(T=>[...T,{label:j.name,value:j}]):A==="origin"?d(T=>[...T,{label:j.name,value:j}]):A==="size"?k(T=>[...T,{label:j.name,value:j}]):A==="color"?q(T=>[...T,{label:j.name,value:j}]):A==="style"?p(T=>[...T,{label:j.name,value:j}]):A==="material"?f(T=>[...T,{label:j.name,value:j}]):A==="collar"?C(T=>[...T,{label:j.name,value:j}]):A==="sleeve"?y(T=>[...T,{label:j.name,value:j}]):A==="texture"?u(T=>[...T,{label:j.name,value:j}]):A==="thickness"?x(T=>[...T,{label:j.name,value:j}]):A==="elasticity"&&v(T=>[...T,{label:j.name,value:j}])},touched:t,errors:e,values:a})]})},ys=t=>{const{images:e,onImageDelete:a}=t,[r,n]=N.useState({}),[s,o]=N.useState(!1),[l,c]=N.useState(!1),d=f=>{n(f),o(!0)},h=()=>{o(!1),setTimeout(()=>{n({})},300)},p=f=>{n(f),c(!0)},m=()=>{a==null||a(r),c(!1)};return i.jsxs(i.Fragment,{children:[e.map(f=>i.jsxs("div",{className:"group relative rounded border p-2 flex",children:[i.jsx("img",{className:"rounded max-h-[140px] max-w-full",src:f.url,alt:f.url}),i.jsxs("div",{className:"absolute inset-2 bg-gray-900/[.7] group-hover:flex hidden text-xl items-center justify-center",children:[i.jsx("span",{className:"text-gray-100 hover:text-gray-300 cursor-pointer p-1.5",onClick:()=>d(f),children:i.jsx(tn,{})}),i.jsx("span",{className:"text-gray-100 hover:text-gray-300 cursor-pointer p-1.5",onClick:()=>p(f),children:i.jsx(nn,{})})]})]},f.id)),i.jsxs(at,{isOpen:s,onClose:h,onRequestClose:h,children:[i.jsx("h5",{className:"mb-4",children:r.code}),i.jsx("img",{className:"w-full",src:r.url,alt:r.url})]}),i.jsx(wt,{isOpen:l,type:"danger",title:"Xóa ảnh",cancelText:"HỦY",confirmText:"XÁC NHẬN",confirmButtonColor:"red-600",onClose:()=>c(!1),onRequestClose:()=>c(!1),onCancel:()=>c(!1),onConfirm:m,children:i.jsx("p",{children:"Bạn có chắc chắn muốn xóa hình ảnh này không? "})})]})},bs=t=>{const{values:e}=t,[a,r]=N.useState(!1),n=l=>{let c=!0;const d=["image/jpeg","image/png"],h=5e5;if(l)for(const p of l)d.includes(p.type)||(c="Vui lòng tải lên tệp .jpeg hoặc .png!"),p.size>=h&&(c="Tải lên hình ảnh không được vượt quá 500KB!");return c},s=async(l,c,d)=>{if(!d||d.length===0)return;r(!0);const h=d[d.length-1],p=new FormData;p.append("file",h);try{const m=await fetch("http://localhost:8080/api/v1/image/upload",{method:"POST",body:p});if(!m.ok)throw new Error("Không tải được hình ảnh lên");const f=await m.text(),b={id:Date.now(),code:h.name,url:f,deleted:!1,createdDate:new Date().toISOString(),modifiedDate:new Date().toISOString()},C=[...e.images,b];l.setFieldValue(c.name,C)}catch(m){console.error("Error uploading image:",m)}finally{r(!1)}},o=(l,c,d)=>{let h=e.images.filter(p=>p.id!==d.id);l.setFieldValue(c.name,h)};return i.jsxs(me,{className:"mb-4",children:[i.jsx("h5",{children:"Ảnh sản phẩm "}),i.jsx(J,{children:i.jsx(ne,{name:"images",children:({field:l,form:c})=>i.jsx("div",{children:e.images.length>0?i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[i.jsx(ys,{images:e.images,onImageDelete:d=>o(c,l,d)}),i.jsx(ut,{draggable:!0,beforeUpload:n,showList:!1,onChange:d=>s(c,l,d),children:i.jsxs("div",{className:"max-w-full flex flex-col px-4 py-2 justify-center items-center",children:[i.jsx(Me,{src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"}),a?i.jsx("div",{className:"mt-4",children:"Đang tải..."}):i.jsx("p",{className:"font-semibold text-center text-gray-800 dark:text-white",children:"Tải lên "})]})})]}):i.jsx(ut,{draggable:!0,beforeUpload:n,showList:!1,onChange:d=>s(c,l,d),children:i.jsxs("div",{className:"my-16 text-center",children:[i.jsx(Me,{className:"mx-auto",src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"}),a?i.jsx("div",{className:"mt-4",children:"Đang tải..."}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"font-semibold",children:[i.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Thả hình ảnh của bạn ở đây, hoặc"," "]}),i.jsx("span",{className:"text-blue-500",children:"duyệt"})]}),i.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Hỗ trợ: jpeg, png"})]})]})})})})})]})},Cs=t=>{const{touched:e,errors:a}=t;return i.jsxs(me,{divider:!0,children:[i.jsx("h5",{children:"Mô tả sản phẩm "}),i.jsx(J,{labelClass:"!justify-start",invalid:a.description&&e.description,errorMessage:a.description,children:i.jsx(ne,{name:"description",children:({field:r,form:n})=>i.jsx(an,{value:r.value,onChange:s=>n.setFieldValue(r.name,s),readOnly:!0})})})]})},xs=t=>i.jsx(oe,{...t,value:t.field.value,prefix:"$"}),Ds=t=>i.jsx(oe,{...t,value:t.field.value}),yt=({onValueChange:t,...e})=>i.jsx(sn,{customInput:oe,type:"text",autoComplete:"off",onValueChange:t,...e}),ws=t=>{const{touched:e,errors:a}=t;return i.jsxs(me,{divider:!0,className:"mb-4",children:[i.jsx("h5",{children:"Thông tin sản phẩm"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-1",children:i.jsx(J,{label:"Số lượng",invalid:!!(a.quantity&&e.quantity),errorMessage:a.quantity,children:i.jsx(ne,{name:"quantity",children:({field:r,form:n})=>i.jsx(yt,{form:n,field:r,placeholder:"Số lượng",customInput:Ds,onValueChange:s=>{n.setFieldValue(r.name,s.value)}})})})}),i.jsx("div",{className:"col-span-1",children:i.jsx(J,{label:"Giá",invalid:a.price&&e.price,errorMessage:a.price,children:i.jsx(ne,{name:"price",children:({field:r,form:n})=>i.jsx(yt,{form:n,field:r,placeholder:"Giá",customInput:xs,onValueChange:s=>{n.setFieldValue(r.name,s.value)}})})})})]})]})};fe("optionList",Qt);const Ss=V().shape({brand:V().nullable().required("Thương hiệu là bắt buộc!"),origin:V().nullable().required("Xuất xứ là bắt buộc!"),style:V().nullable().required("Kiểu dáng là bắt buộc!"),material:V().nullable().required("Chất liệu là bắt buộc!"),collar:V().nullable().required("Kiểu cổ áo là bắt buộc!"),sleeve:V().nullable().required("Kiểu tay áo là bắt buộc!"),texture:V().nullable().required("Kết cấu vải là bắt buộc!"),thickness:V().nullable().required("Độ dày vải là bắt buộc!"),elasticity:V().nullable().required("Độ đàn hồi vải là bắt buộc!"),mass:qe().required("Khối lượng là bắt buộc!").typeError("Khối lượng phải là số!").positive("Khối lượng phải là số dương!"),price:qe().required("giá là bắt buộc!").typeError("giá phải là số!").positive("giá phải là số dương!"),quantity:qe().required("Số lượng là bắt buộc!").typeError("Số lượng  phải là số!").positive("Số lượng phải là số dương!"),color:V().nullable().required("Màu sắc là bắt buộc!"),size:V().nullable().required("Kích thước là bắt buộc!")}),Yt=N.forwardRef((t,e)=>{var x;const{initialData:a={id:0,name:"",code:"",product:null,size:null,color:null,brand:null,collar:null,elasticity:null,material:null,origin:null,sleeve:null,style:null,texture:null,thickness:null,images:null,mass:500,price:1e5,quantity:40,description:""},onFormSubmit:r,onDiscard:n}=t,s=X();N.useEffect(()=>{o()},[]);const o=()=>{s(Le()),s(Se()),s(je()),s(Ne()),s(ve()),s(Ee()),s(Ae()),s(Te()),s(Ie()),s(Pe()),s(ke()),s(Be())},{productData:l,brandData:c,originData:d,styleData:h,collarData:p,sleeveData:m,thicknessData:f,textureData:b,elasticityData:C,colorData:I,sizeData:y,materialData:S}=dt(D=>D.optionList.options),u=D=>(D==null?void 0:D.map(v=>({label:v.name,value:v})))||[],g={brands:u(c),origins:u(d),styles:u(h),collars:u(p),sleeves:u(m),thicknesses:u(f),textures:u(b),elasticities:u(C),colors:u(I),sizes:u(y),materials:u(S)};return i.jsx(rn,{innerRef:e,initialValues:{...a,code:a.code||"",price:a.price||0,mass:a.mass||0,quantity:a.quantity||0,product:a.product||null,brand:a.brand||null,origin:a.origin||null,style:a.style||null,material:a.material||null,collar:a.collar||null,sleeve:a.sleeve||null,texture:a.texture||null,thickness:a.thickness||null,elasticity:a.elasticity||null,color:a.color||null,size:a.size||null,images:a.images||[],description:((x=a.product)==null?void 0:x.description)||null},validationSchema:Ss,onSubmit:(D,{setSubmitting:v})=>{const P=ce(D);r==null||r(P,v)},children:({values:D,touched:v,errors:P,isSubmitting:k,setFieldValue:B})=>i.jsx(on,{children:i.jsxs(ln,{children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"lg:col-span-1",children:[i.jsx(ps,{touched:v,errors:P,values:D,setFieldValue:B,data:g}),i.jsx(Cs,{touched:v,errors:P,values:D,setFieldValue:B})]}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsx(ws,{touched:v,errors:P}),i.jsx(bs,{values:D})]})]}),i.jsxs(Zn,{className:" px-8 flex items-center justify-between py-4",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[i.jsx("div",{children:" "}),i.jsxs("div",{className:"md:flex items-center",children:[i.jsx(te,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:()=>n==null?void 0:n(),children:"Quay lại"}),i.jsx("div",{hidden:!Wn(["ROLE_ADMIN"]),children:i.jsx(te,{size:"sm",className:"ltr:mr-3 rtl:ml-3",loading:k,type:"submit",variant:"solid",style:{backgroundColor:"rgb(79, 70, 229)"},children:"Lưu"})})]})]})]})})})});Yt.displayName="ProductDetailForm";const js=()=>{var d,h;const t=X(),e=M(p=>p.productDetailUpdate.updateProductDetailed.UpdateConfirmation),a=M(p=>p.productDetailUpdate.updateProductDetailed.loading),r=M(p=>{var m,f;return(f=(m=p.productDetailUpdate.updateProductDetailed.productDetail)==null?void 0:m.product)==null?void 0:f.name}),n=M(p=>p.productDetailUpdate.updateProductDetailed.productDetail),s=M(p=>p.salesProductDetailList.data.tableData),o=()=>{t(qt(!1))},l=async(p,m)=>{var b,C,I,y;m(!0);const f=await Wa(p,p.id);m(!1),f?(o(),t(ee(s)),$.success(`Cập nhật thành công sản phẩm  ${r} màu ${(b=n==null?void 0:n.color)==null?void 0:b.name} (size ${(C=n==null?void 0:n.size)==null?void 0:C.name})`)):(o(),$.error(`Lỗi cập nhật sản phẩm ${r} màu ${(I=n==null?void 0:n.color)==null?void 0:I.name} (size ${(y=n==null?void 0:n.size)==null?void 0:y.name}) . Vui lòng thử lại.`))},c=()=>{console.log("Hủy bỏ thay đổi"),o()};return i.jsx(at,{isOpen:e,width:"auto",height:"auto",onClose:o,onRequestClose:o,children:i.jsxs("div",{className:"flex flex-col h-full justify-between",children:[i.jsx("h5",{className:"mb-4",children:"Chi tiết sản phẩm "+r+" màu "+((d=n==null?void 0:n.color)==null?void 0:d.name)+"( size "+((h=n==null?void 0:n.size)==null?void 0:h.name)+" )"||"Sản phẩm không tồn tại"}),i.jsx(cn,{loading:a,children:!gt(n)&&i.jsx(Yt,{onFormSubmit:l,onDiscard:c,initialData:n})}),!a&&gt(n)&&i.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[i.jsx(Me,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No product found!"}),i.jsx("h3",{className:"mt-8",children:"Không tìm thấy sản phẩm!"})]})]})})},Ns=()=>{const t=X(),e=M(o=>o.salesProductDetailList.data.deleteConfirmation),a=M(o=>o.salesProductDetailList.data.selectedProductDetail),r=M(o=>o.salesProductDetailList.data.tableData),n=()=>{t(tt(!1))},s=async()=>{t(tt(!1)),await Va({id:a})?(t(ee(r)),$.success("Cập nhật trạng thái thành công")):$.error("Lỗi cập nhật trạng thái. Vui lòng thử lại.")};return i.jsx(wt,{isOpen:e,type:"danger",title:"Xóa sản phẩm",cancelText:"Hủy",confirmText:"Xác nhận",confirmButtonColor:"red-600",onClose:n,onRequestClose:n,onCancel:n,onConfirm:s,children:i.jsx("p",{children:"Bạn có chắc chắn muốn ngừng bán sản phẩm này không? Tất thông tin sản phẩm liên quan đến sản phẩm này cũng sẽ bị xóa."})})},bt=t=>i.jsx("div",{className:"text-lg",children:t}),vs=t=>t>10?{label:"còn hàng",dotClass:"bg-emerald-500",textClass:"text-emerald-500"}:t>0?{label:"sắp hết hàng",dotClass:"bg-amber-500",textClass:"text-amber-500"}:{label:"hết hàng",dotClass:"bg-red-500",textClass:"text-red-500"},Es=({row:t})=>{var a,r,n;const e=Array.isArray(t.images)&&t.images.length>0?i.jsx(ht,{size:50,src:t.images&&((a=t.images[0])==null?void 0:a.url)}):i.jsx(ht,{size:50,icon:i.jsx(hn,{})});return i.jsxs("div",{className:"flex items-center",children:[e,i.jsx("span",{className:"ml-2 rtl:mr-2 font-semibold",children:((r=t.product)==null?void 0:r.name)+" màu "+((n=t.color)==null?void 0:n.name)||""})]})},As=()=>{const t=N.useRef(null),e=X(),{id:a}=dn(),{pageIndex:r,pageSize:n,sort:s,query:o,total:l}=M(u=>u.salesProductDetailList.data.tableData),c=M(u=>u.salesProductDetailList.data.loading),d=M(u=>u.salesProductDetailList.data.productDetailList);N.useEffect(()=>{e(we({productId:a||""})),e(Ja(a)),e(Kt({productId:55,size:"",color:"",style:"",texture:"",origin:"",brand:"",collar:"",sleeve:"",material:"",thickness:"",elasticity:""})),p()},[a]),N.useEffect(()=>{p()},[r,n,s]);const h=N.useMemo(()=>({pageIndex:r,pageSize:n,sort:s,query:o,total:l}),[r,n,s,o,l]),p=()=>{e(ee({pageIndex:r,pageSize:n,sort:s,query:o}))},m=({row:u})=>{const g=X(),x=()=>{g(qt(!0)),g(De({id:u.id}))},D=()=>{g(tt(!0)),g(Ya(u.id))},v=(P,k)=>{D()};return i.jsxs("div",{className:"flex justify-end text-lg",children:[i.jsx(fn,{onClick:x,size:20,className:"mr-3 text-2xl",style:{cursor:"pointer"}}),i.jsx(mn,{className:"text-sm",unCheckedContent:bt(i.jsx(Jn,{})),checkedContent:bt(i.jsx(Yn,{})),color:"green-500",checked:!u.deleted,onChange:v})]})},f=N.useMemo(()=>[{header:"#",id:"index",cell:u=>{const{pageIndex:g,pageSize:x}=M(k=>k.salesProductDetailList.data.tableData),D=g??0,v=x??10;return(D-1)*v+(u.row.index+1)}},{header:"Tên",accessorKey:"product__name",cell:u=>{const g=u.row.original;return i.jsx(Es,{row:g})}},{header:"Mã",accessorKey:"product__code",cell:u=>{const g=u.row.original;return i.jsx("p",{children:g.code})}},{header:"Màu Sắc",accessorKey:"color__name",cell:u=>{const g=u.row.original;return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:" block w-6 h-6 rounded-full",style:{backgroundColor:g.color.name}}),g.color.name]})}},{header:"Kích Thước",accessorKey:"size__name",cell:u=>{const g=u.row.original;return i.jsx("span",{className:"capitalize",children:g.size.name})}},{header:"Thương hiệu",accessorKey:"brand__name",cell:u=>{const g=u.row.original;return i.jsx("span",{className:" block h-5 rounded-xl",children:g.brand.name})}},{header:"Xuất xứ",accessorKey:"origin__name",cell:u=>{const g=u.row.original;return i.jsx("p",{className:" block  h-5 rounded-xl",children:g.origin.name})}},{header:"Chất liệu",accessorKey:"material__name",cell:u=>{const g=u.row.original;return i.jsx("p",{className:" block  h-5 rounded-xl",children:g.material.name})}},{header:"Giá",accessorKey:"price",cell:u=>{const g=u.row.original.price;return typeof g!="number"||isNaN(g)?i.jsx("span",{children:"Không xác định"}):g.toLocaleString("vi-VN",{style:"currency",currency:"VND"})}},{header:"Số Lượng",accessorKey:"quantity",cell:u=>{const g=u.row.original;return i.jsx("span",{className:"capitalize",children:g.quantity})}},{header:"Trạng thái",accessorKey:"status",cell:u=>{const{quantity:g}=u.row.original,x=vs(g);return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(un,{className:x.dotClass}),i.jsx("span",{className:`capitalize font-semibold ${x.textClass}`,children:x.label})]})}},{header:"Hành động",id:"action",cell:u=>i.jsx(m,{row:u.row.original})}],[]),b=u=>{const g=ce(h);g.pageIndex=u,e(Ye(g))},C=u=>{const g=ce(h);g.pageSize=Number(u),g.pageIndex=1,e(Ye(g))},I=u=>{const g=ce(h);g.sort={order:u.order,key:u.key.replace("__",".")},e(Ye(g))},y=(u,g)=>{console.log("Indeterminate checkbox changed:",u,g);const x=g.map(D=>D.original);console.log("Converted ProductDetails:",x)},S=(u,g)=>{console.log("Checkbox changed:",u,g)};return i.jsxs(i.Fragment,{children:[d.length>0?i.jsx(gn,{ref:t,columns:f,data:d,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:c,pagingData:{total:h.total,pageIndex:h.pageIndex,pageSize:h.pageSize},onPaginationChange:b,onSelectChange:C,onSort:I,onIndeterminateCheckBoxChange:y,onCheckBoxChange:S}):i.jsxs("div",{className:"flex flex-col justify-center items-center h-1/2",children:[i.jsx(Me,{className:"max-w-[200px]",src:"/img/others/image-removebg-preview-order-empty.png",darkModeSrc:"/img/others/image-removebg-preview-order-empty.png"}),i.jsx("div",{className:"mt-4 text-2xl font-semibold",children:"Chưa có sản phẩm nào!!!"})]}),i.jsx(js,{}),i.jsx(Ns,{})]})},Ts=pn((t,e,a)=>{const r=ce(e);r.query=t,r.pageIndex=1,a(r)},500),Is=()=>{const t=X(),e=M(w=>w.datas.DataProductDetailQuery),a=N.useRef(null),r=M(w=>w.salesProductDetailList.data.tableData),n=M(w=>w.salesProductDetailList.data.filterData),[s,o]=N.useState(!1),[l,c]=N.useState([]),[d,h]=N.useState([]),[p,m]=N.useState([]),[f,b]=N.useState([]),[C,I]=N.useState([]),[y,S]=N.useState([]),[u,g]=N.useState([]),[x,D]=N.useState([]),[v,P]=N.useState([]),[k,B]=N.useState([]),[q,Z]=N.useState([]);N.useEffect(()=>{F()},[e,s]);const z=w=>{const H={...n};t(ee({...w,filterData:H})),t(ee({...w}))},Ve=w=>{Ts(w.target.value,r,z)},F=()=>{const w=A(e.attributeFormData);c(w.brand),h(w.origin),m(w.style),b(w.material),I(w.collar),S(w.sleeve),g(w.texture),D(w.thickness),P(w.elasticity),B(w.size),Z(w.color),o(!0)},A=w=>({brand:j(w.map(E=>E.brand)),origin:j(w.map(E=>E.origin)),style:j(w.map(E=>E.style)),collar:j(w.map(E=>E.collar)),sleeve:j(w.map(E=>E.sleeve)),thickness:j(w.map(E=>E.thickness)),texture:j(w.map(E=>E.texture)),elasticity:j(w.map(E=>E.elasticity)),color:j(w.map(E=>E.color)),size:j(w.map(E=>E.size)),material:j(w.map(E=>E.material))}),j=w=>((w==null?void 0:w.filter((E,Q,O)=>O.findIndex(le=>le.name===E.name)===Q))||[]).map(E=>({label:E.name,value:E})),T=(w,H)=>{const E={...n,[H]:w||""};t(Kt(E)),z({...r,pageIndex:1})},L=(w,H,E)=>i.jsx(J,{label:H,children:i.jsx(Dt,{isClearable:!0,options:E,size:"sm",onChange:Q=>{var O;return T((O=Q==null?void 0:Q.value)==null?void 0:O.name,w)},placeholder:`Chọn ${H.toLowerCase()}...`})});return i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[i.jsx("div",{className:"col-span-1",children:i.jsx(J,{label:"Tìm kiếm",children:i.jsx(oe,{ref:a,className:"w-full",size:"sm",placeholder:"Tìm kiếm theo mã",prefix:i.jsx(yn,{className:"text-lg"}),onChange:Ve})})}),L("brand","Thương hiệu",l),L("origin","Xuất xứ",d),L("style","Kiểu dáng",p)]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[L("material","Chất liệu",f),L("collar","Kiểu cổ áo",C),L("sleeve","KIểu tay áo",y),L("texture","Kết cấu",u)]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[L("thickness","Độ dày",x),L("elasticity","Độ co giãn",v),L("color","Màu sắc",q),L("size","Kích thước",k)]})]})},Ps=()=>{const t=M(r=>r.salesProductDetailList.data.productDetailList),e=()=>{$a(t),$.success("Xuất thành công file sản phẩm chi tiết.")},a=()=>{Ha(t),$.success("Tải thành công QR code sản phẩm.")};return i.jsxs("div",{className:"",children:[i.jsx("div",{className:"flex-grow mb-4 lg:mb-0",children:i.jsx(Is,{})}),i.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:i.jsxs("div",{className:"flex flex-col lg:ml-auto mt-4 lg:mt-0 lg:flex-row lg:justify-end lg:items-end",children:[i.jsx("div",{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",children:i.jsx(te,{block:!0,size:"sm",onClick:e,icon:i.jsx(bn,{}),children:"Xuất Excel"})}),i.jsx("div",{className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",children:i.jsx(te,{block:!0,size:"sm",onClick:a,icon:i.jsx(Cn,{}),children:"Xuất QR Code"})})]})})]})};fe("salesProductDetailList",ct);fe("productDetailUpdate",ct);fe("datas",ct);const Ks=()=>i.jsxs(me,{className:"h-full",bodyClass:"h-full",children:[i.jsx("h3",{className:"mb-4 lg:mb-0",children:"SẢN PHẨM CHI TIẾT"}),i.jsx("div",{className:"mb-5 mt-5",children:i.jsx(Ps,{})}),i.jsx(As,{})]});export{Ks as default};
