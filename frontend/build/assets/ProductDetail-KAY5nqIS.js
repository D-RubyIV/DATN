import{r as a,j as e,er as se,ci as ae,al as ne,bG as ce,aI as ie,as as I,aM as le,aN as re}from"./index-D8wAv7Ri.js";import{q as oe}from"./ClassicLayout-CF154tbn.js";import{P as de}from"./ProductInfo-D8hgTeXS.js";import{P as he}from"./ProductCard-94iFA3iW.js";import"./Box-DGRPwwlx.js";const G=[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:50,label:"50 / page"}],me=()=>{const[h,m]=a.useState([]),[f,u]=a.useState(!0);a.useState(null);const[i,j]=a.useState(10),l=d=>{j(d.value)},b=d=>{w(d)},[y,w]=a.useState(0),[S,P]=a.useState(0);return a.useEffect(()=>{(async()=>{try{const C=await(await fetch("http://localhost:8080/api/v1/productDetails/new-in-last-week?page=0&size=5")).json();m(C.content),u(!1)}catch(g){console.error("Error fetching products:",g),u(!1)}})()},[y,i]),f?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"mx-auto p-4",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-8 mt-5",children:h.map((d,g)=>e.jsx(he,{product:d},g))}),e.jsxs("div",{className:"flex items-center justify-end pb-10",children:[" ",e.jsx(se,{currentPage:y+1,pageSize:i,total:S,onChange:b}),e.jsx("div",{style:{minWidth:120},className:"ml-4",children:e.jsx(ae,{size:"sm",isSearchable:!1,defaultValue:G[0],options:G,onChange:d=>l(d)})})]})]})},xe=h=>{const m=window.scrollY,f=performance.now(),u=i=>{const j=i-f,l=Math.min(j/h,1),b=l<.5?2*l*l:1-Math.pow(-2*l+2,2)/2;window.scrollTo(0,m-m*b),l<1&&requestAnimationFrame(u)};requestAnimationFrame(u)},ue=()=>{const{pathname:h}=ne();return a.useEffect(()=>{const m=setTimeout(()=>{xe(1e3)},0);return()=>clearTimeout(m)},[h]),null},ve=()=>{var L,$,O,V;const{id:h}=ce(),{myCartId:m,getCartDetailInCard:f,fetchDataMyCart:u}=oe(),[i,j]=a.useState(),[l,b]=a.useState([]),[y,w]=a.useState([]),[S,P]=a.useState([]),[d,g]=a.useState([]),[C,K]=a.useState([]),[o,A]=a.useState(null),[r,_]=a.useState(null),[s,k]=a.useState(null),[T,Q]=a.useState(null),[M,Z]=a.useState(0),{openNotification:z}=ie(),[v,q]=a.useState(1),B=()=>{v-1>0&&q(v-1)},U=()=>{q(v+1)},[E,W]=a.useState(0);a.useEffect(()=>{console.log(i),i&&i.nowAverageDiscountPercentEvent&&W(i.nowAverageDiscountPercentEvent)},[i]),a.useEffect(()=>{h&&(I.get(`/productDetails/product-detail-of-product/${h}`).then(t=>{t!=null&&t.data&&(b(t.data),Q(X(t.data)))}),I.get(`/product/${h}`).then(t=>{t!=null&&t.data&&j(t.data)}))},[h]),a.useEffect(()=>{},[l]),a.useEffect(()=>{if(l.length>0){const t=l.reduce((c,x)=>(c.some(p=>p.code===x.color.code)||c.push(x.color),c),[]),n=l.reduce((c,x)=>(c.some(p=>p.id===x.size.id)||c.push(x.size),c),[]);P(t),K(n),t.length>0&&A(t[0]),n.length>0&&_(n[0])}},[l]),a.useEffect(()=>{if(o&&r){const t=l.find(n=>n.color.id===o.id&&n.size.id===r.id);k(t??null)}},[o,r,l]);const Y=t=>{Z(t)},D=t=>[...new Set(t)],J="https://t4.ftcdn.net/jpg/04/99/93/31/360_F_499933117_ZAUBfv3P1HEOsZDrnkbNCt4jc3AodArl.jpg",X=t=>{if(t.length===0)return null;const n=t.map(c=>c.price);return{min:Math.min(...n),max:Math.max(...n)}},N=t=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(t);a.useEffect(()=>{console.log("selectedColor CODE: "+(o==null?void 0:o.code)),console.log("selectedColor ID: "+(o==null?void 0:o.id))},[o]),a.useEffect(()=>{console.log("selectedSize CODE: "+(r==null?void 0:r.code)),console.log("selectedSize ID: "+(r==null?void 0:r.id))},[r]);const ee=t=>{_(t);const n=D(l.filter(c=>c.size.id===t.id).map(c=>c.color.code));w(n)},te=t=>{A(t);const n=D(l.filter(c=>c.color.id===t.id).map(c=>c.size.code));g(n),console.log(n),_(null)};a.useEffect(()=>{if(o&&r){const t=l.find(n=>n.color.id===o.id&&n.size.id===r.id);k(t??null)}else k(null)},[o,r,l]);const H=async(t=!1)=>{if(!(s!=null&&s.id))z("Vui lòng chọn biến thể phù hợp","Thông báo","warning",5e3);else{const n={cartId:m,productDetailId:s==null?void 0:s.id,quantity:v};await I.post("/cart-details/create",n).then(function(c){console.log(c),c.status===200&&(z("Thêm vào giỏ hàng thành công"),f(),t&&(window.location.href=`/checkout/${m}`))}).catch(function(c){var x,p,R,F;(p=(x=c==null?void 0:c.response)==null?void 0:x.data)!=null&&p.error&&z((F=(R=c==null?void 0:c.response)==null?void 0:R.data)==null?void 0:F.error,"Thông báo","warning",5e3)})}await u()};return e.jsxs("div",{className:"px-[2%] mt-10",children:[e.jsxs("div",{className:"flex justify-start gap-10 mb-5",children:[e.jsxs("div",{className:"col-span-6 border border-black p-10",children:[e.jsxs("div",{className:"mb-4 relative",children:[i&&Array.isArray(i.eventDTOList)&&i.eventDTOList.length>0&&e.jsxs("div",{className:"absolute top-2 right-2 bg-red-600 text-white p-2 border border-black z-20",children:["- ",i.eventDTOList[0].discountPercent,"%"]}),e.jsx("img",{className:"w-[400px] h-[500px] object-cover rounded-lg",src:(($=(L=s==null?void 0:s.images)==null?void 0:L[M])==null?void 0:$.url)||J,alt:"Product Image"})]}),(s==null?void 0:s.images)&&s.images.length>0&&e.jsx("div",{className:"flex gap-2 overflow-x-auto justify-center",children:s.images.map((t,n)=>e.jsx("img",{src:t.url,alt:`Thumbnail ${n+1}`,className:`w-24 h-24 object-cover cursor-pointer ${M===n?"border-2 border-black":""}`,onClick:()=>Y(n)},n))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("div",{children:e.jsx("p",{className:"font-semibold text-2xl text-black",children:i==null?void 0:i.name})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{children:["Mã sản phẩm chi tiết: ",e.jsx("span",{className:"text-black",children:s==null?void 0:s.code})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("p",{children:["Thương hiệu: ",e.jsx("span",{className:"text-black",children:(O=s==null?void 0:s.brand)==null?void 0:O.name})]})}),e.jsxs("p",{children:["Chất liệu ",e.jsx("span",{className:"text-black",children:(V=s==null?void 0:s.material)==null?void 0:V.name})]})]}),e.jsx("div",{children:e.jsxs("p",{children:["Kho: ",e.jsx("span",{className:"text-black",children:s==null?void 0:s.quantity})]})}),e.jsx("div",{children:e.jsxs("p",{children:["Tình trạng: ",e.jsx("span",{className:"text-black",children:(s==null?void 0:s.quantity)>0?"Còn hàng":"Hết hàng"})]})}),e.jsxs("div",{className:"py-2",children:[e.jsx("div",{className:"font-semibold text-[18px] text-black pb-1",children:"Màu sắc"}),e.jsx("div",{className:"flex gap-3",children:S.map((t,n)=>e.jsx("button",{className:`relative hover:bg-gray-200 p-2 aspect-square w-[60px] text-center hover:outline-black outline-offset-4 hover:outline outline-2 border ${(o==null?void 0:o.id)===t.id?"!bg-black text-white outline-black outline":"border-black border"}`,onClick:()=>te(t),children:t.name},n))})]}),e.jsxs("div",{className:"py-2",children:[e.jsx("div",{className:"font-semibold text-black pb-1 text-[18px]",children:"Size"}),e.jsx("div",{className:"flex gap-3",children:C.map((t,n)=>e.jsxs("button",{className:`relative hover:bg-gray-200 p-2 aspect-square w-[60px] text-center hover:outline-black outline-offset-4 hover:outline outline-2 border ${(r==null?void 0:r.id)===t.id?"!bg-black text-white outline-black outline":"border-black border"}`,disabled:!d.includes(t.code)&&d.length>0,onClick:()=>ee(t),children:[t.name,e.jsx("span",{className:`absolute w-[2px] h-full bg-black top-1/2 left-1/2 rotate-45 -translate-x-1/2 -translate-y-1/2 ${!d.includes(t.code)&&d.length>0?"":"hidden"} ${(r==null?void 0:r.id)===t.id?"bg-white":"bg-black"}`})]},n))})]}),e.jsx("div",{className:"py-3 text-xl",children:e.jsx("p",{children:s?e.jsxs("span",{className:"text-xl text-red-500 font-semibold flex gap-4",children:[E!==0&&e.jsx("div",{children:e.jsx("p",{children:N(s.price/100*(100-E))})}),e.jsx("div",{children:e.jsx("p",{className:`${E!==0?"line-through":""}`,children:N(s.price)})})]}):T?e.jsxs("div",{className:"text-xl text-red-500 font-semibold",children:[N(T.min)," - ",N(T.max)]}):e.jsx("span",{children:"Đang cập nhật"})})}),e.jsxs("div",{className:"py-2",children:[e.jsx("div",{className:"font-semibold text-black pb-1 text-[18px]",children:"Số lượng"}),e.jsxs("div",{className:"flex gap-1 items-center justify-start",children:[e.jsx("button",{className:"pe-2 text-xl",onClick:()=>U(),children:e.jsx(le,{size:25})}),e.jsx("label",{children:v}),e.jsx("button",{className:"pl-2 text-xl",onClick:()=>B(),children:e.jsx(re,{size:25})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-4 font-semibold text-red-500 py-2 border border-red-500",onClick:()=>H(),children:"Thêm vào giỏ hàng"}),e.jsx("button",{className:"px-4 font-semibold bg-red-500 text-white py-2 border border-red-500",onClick:async()=>{await H(!0)},children:"Mua ngay"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-10 flex flex-wrap items-center justify-between space-x-2",children:[e.jsxs("div",{className:"flex items-start space-x-1 w-1/4",children:[e.jsx("img",{className:"w-6 h-6 lazyloaded","data-src":"//theme.hstatic.net/200000690725/1001078549/14/product_info1_desc1_img.png?v=550",src:"//theme.hstatic.net/200000690725/1001078549/14/product_info1_desc1_img.png?v=550",alt:"Miễn phí giao hàng cho đơn hàng từ 1 triệu"}),e.jsx("div",{className:"text-gray-800 text-sm flex-1",children:"Miễn phí giao hàng cho đơn hàng từ 1 triệu"})]}),e.jsxs("div",{className:"flex items-start space-x-1 w-1/4",children:[e.jsx("img",{className:"w-6 h-6 lazyloaded","data-src":"//theme.hstatic.net/200000690725/1001078549/14/product_info1_desc2_img.png?v=550",src:"//theme.hstatic.net/200000690725/1001078549/14/product_info1_desc2_img.png?v=550",alt:"Hàng phân phối chính hãng 100%"}),e.jsx("div",{className:"text-gray-800 text-sm flex-1",children:"Hàng phân phối chính hãng 100%"})]}),e.jsxs("div",{className:"flex items-start space-x-1 w-1/4",children:[e.jsx("img",{className:"w-6 h-6 lazyloaded","data-src":"//theme.hstatic.net/200000690725/1001078549/14/product_info1_desc3_img.png?v=550",src:"//theme.hstatic.net/200000690725/1001078549/14/product_info1_desc3_img.png?v=550",alt:"TỔNG ĐÀI 24/7 :  0964942121"}),e.jsx("div",{className:"text-gray-800 text-sm flex-1",children:"TỔNG ĐÀI 24/7 : 0964942121"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between space-x-2",children:[e.jsxs("div",{className:"flex items-start space-x-1 w-1/4",children:[e.jsx("img",{className:"w-6 h-6 lazyloaded","data-src":"//theme.hstatic.net/200000690725/1001078549/14/product_info2_desc1_img.png?v=550",src:"//theme.hstatic.net/200000690725/1001078549/14/product_info2_desc1_img.png?v=550",alt:"ĐỔI SẢN PHẨM DỄ DÀNG (Trong vòng 7 ngày khi còn nguyên tem mác)"}),e.jsx("div",{className:"text-gray-800 text-sm flex-1",children:"Sản phẩm uy tín, chất lượng, bán hàng bằng trái tim"})]}),e.jsxs("div",{className:"flex items-start space-x-1 w-1/4",children:[e.jsx("img",{className:"w-6 h-6 lazyloaded","data-src":"//theme.hstatic.net/200000690725/1001078549/14/product_info2_desc2_img.png?v=550",src:"//theme.hstatic.net/200000690725/1001078549/14/product_info2_desc2_img.png?v=550",alt:"Kiểm tra, thanh toán khi nhận hàng COD"}),e.jsx("div",{className:"text-gray-800 text-sm flex-2 max-w-full",children:"Kiểm tra, thanh toán khi nhận hàng COD"})]}),e.jsxs("div",{className:"flex items-start space-x-1 w-1/4",children:[e.jsx("img",{className:"w-6 h-6 lazyloaded","data-src":"//theme.hstatic.net/200000690725/1001078549/14/product_info2_desc3_img.png?v=550",src:"//theme.hstatic.net/200000690725/1001078549/14/product_info2_desc3_img.png?v=550",alt:"Hỗ trợ bảo hành, đổi sản phẩm tại tất cả store CANTH"}),e.jsx("div",{className:"text-gray-800 text-sm flex-1 max-w-full",children:"Hỗ trợ bảo hành, đổi sản phẩm tại tất cả tại store CANTH"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-start gap-10 mt-5",children:e.jsx(de,{productDescription:i==null?void 0:i.description,reviews:"Đánh giá từ khách hàng đã mua sản phẩm.",returnPolicy:"Chính sách đổi trả áp dụng trong vòng 7 ngày khi sản phẩm còn nguyên tem mác.",warrantyPolicy:"Sản phẩm được bảo hành tại tất cả các cửa hàng CANTH."})}),e.jsxs("div",{className:"flex flex-col justify-center items-center mt-4 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Có thể bạn sẽ thích"}),e.jsx("div",{className:"w-full",children:e.jsx(me,{})})]}),e.jsx(ue,{})]})};export{ve as default};
