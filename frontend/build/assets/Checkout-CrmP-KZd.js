import{bc as $e,aI as me,r as d,R as ue,j as e,aJ as pe,a3 as qe,er as ze,as as m,bG as He,aH as We,bP as Xe,at as Be,au as O,b1 as Ge,et as Ue,eu as Qe,ev as Ke,aC as L,ci as Z,E as oe,bf as P,ew as he,aQ as _e,L as Ze,B as Je}from"./index-BUuDiwj7.js";import{q as ge,i as xe,o as Ye}from"./ClassicLayout-CYxuLII9.js";const es=({onVoucherSelect:r,isVoucherModalOpen:I,setIsVoucherModalOpen:R,toggleVoucherModal:$})=>{$e(),me();const[E,X]=d.useState([]),[B,q]=d.useState(!1),{user:b}=ue(),[G,x]=d.useState(0);d.useEffect(()=>{console.log("user",b)},[]);const[n,A]=d.useState({total:0,pageIndex:1,pageSize:5,query:"",typeTicket:"",sort:{order:"",key:""}}),y=g=>{A(j=>({...j,pageIndex:g}))};ge();const z=async()=>{try{q(!0);const g={page:n.pageIndex-1,size:n.pageSize,query:n.query,typeTicket:n.typeTicket,sort:n.sort?n.sort.key+","+n.sort.order:"",customerId:(b==null?void 0:b.customerId)||""},j=await m.get("/voucher/find-valid-voucher",{params:g});X(j.data.content||[]),x(j.data.totalElements),A(M=>({...M,total:j.data.totalElements||0}))}finally{q(!1)}},C=()=>{R(!1),document.body.style.overflow="auto"};return d.useEffect(()=>{z()},[n.pageIndex,n.pageSize,n.query,n.typeTicket,n.sort]),e.jsx("div",{className:"fixed top-0 left-0 bg-gray-300 bg-opacity-50 w-screen h-screen z-40",children:e.jsx("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3/12 h-auto bg-gray-100 shadow-md rounded-md",children:e.jsxs("div",{className:"p-5 bg-white h-2/5 rounded-md",children:[e.jsxs("div",{className:"flex justify-between pb-3",children:[e.jsx("p",{className:"font-semibold text-xl",children:"Danh sách khuyến mãi"}),e.jsx(pe,{className:"text-2xl py-1",onClick:C})]}),E.length>0?e.jsx("div",{className:"flex flex-col gap-2",children:E.map((g,j)=>e.jsxs("div",{className:"flex h-40 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 cursor-pointer",children:[e.jsx("div",{className:"w-24 bg-[#ee4d2d] flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:e.jsx(qe,{size:32})})}),e.jsxs("div",{className:"flex-1 px-3 py-2 relative border-gray-300 border",children:[e.jsx("div",{className:"inline-block bg-[#ee4d2d] text-white text-xs px-1.5 py-1 rounded-sm mb-1",children:g.code}),e.jsxs("div",{className:"text-gray-800 font-medium text-base mb-1",children:["Giảm: ",g.maxPercent,"%  ",e.jsx("br",{}),"Đơn tối thiểu: ",e.jsxs("span",{className:"text-blue-600 font-semibold text-lg",children:[" ",g.minAmount.toLocaleString("vi")," vnđ"]})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs",children:e.jsxs("span",{className:"text-gray-400",children:["- HSD: ",g.endDate]})}),e.jsxs("div",{className:"text-[#0055AA] text-xs mt-1",children:["Chi tiết ",">>"]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-end mr-2",children:e.jsx("button",{type:"button",className:"border-black border p-1 text-[20px] font-semibold",onClick:()=>r(g),children:"Chọn"})}),e.jsx("div",{className:"absolute -left-[6px] top-0 h-full flex flex-col justify-between py-1",children:[...Array(6)].map((M,S)=>e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-100"},S))})]})]},j))}):e.jsx("div",{className:"flex justify-center py-10",children:e.jsx("p",{className:"flex justify-between py-28 items-center text-xl font-semibold",children:"Không có khuyến mãi nào phù hợp"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(ze,{total:G,currentPage:n.pageIndex,pageSize:n.pageSize,onChange:g=>{y(g)}})})]})})})},ss=({isOpen:r,onClose:I,onConfirm:R,message:$="Bạn có chắc chắn muốn đặt hàng này không?"})=>r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl text-center max-w-sm w-full",children:[e.jsx("p",{className:"mb-4 text-lg",children:$}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:I,className:"px-4 py-2 bg-gray-200 text-black rounded hover:bg-gray-300",children:"Hủy"}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-black text-white rounded hover:bg-gray-800",children:"Xác nhận"})]})]})}):null,is=()=>{var ne,ie,ce,de;const[r,I]=d.useState({}),[R,$]=d.useState([]),[E,X]=d.useState([]),[B,q]=d.useState([]),[b,G]=d.useState([]),{id:x}=He(),[n,A]=d.useState(),[y,z]=d.useState(n==null?void 0:n.payment);We();const{openNotification:C}=me(),{setIsOpenCartDrawer:g}=ge(),[j,M]=d.useState(!1),[S,fe]=d.useState(null);d.useState(1e5);const[je,U]=d.useState(!1),{callHaveNewOrder:J}=Xe(),[ve,H]=d.useState(!1),Q=()=>{M(!j)},Ne=s=>{fe(s),Y("voucherCode",s.code),Q(),console.log("Phiếu giảm giá đã chọn:",s)},be=async()=>{m.get(`cart/check-cart-active/${x}`).then(function(s){s.data.deleted&&(localStorage.removeItem("myCartId"),console.log("Xóa cart id ở check-cart-activ"),window.location.reload())}).catch(function(s){console.log(s.response.data.error==="Order not found"),s.response.status===400&&(localStorage.removeItem("myCartId"),console.log("Xóa cart id ở check Order"),window.location.href="/")})},ye=Be({recipientName:O().default("").required("Tên người nhận không được để trống"),email:O().default("").required("Email người nhận không được để trống"),phone:O().default("").required("Số điện thoại không được để trống"),address:O().default("").required("Địa chỉ không được để trống"),provinceId:O().default("").required("Tỉnh/ thành không được để trống"),districtId:O().default("").required("Quận/huyện không được để trống"),wardId:O().default("").required("Xã/ phường không được để trống")}),{register:we,handleSubmit:Ie,formState:{errors:K},setValue:Y}=xe({mode:"onChange"}),{register:k,handleSubmit:ee,getValues:i,formState:{errors:u,isValid:Se},watch:ke,setValue:p}=xe({resolver:Ye(ye),mode:"onChange"}),De=ke(),se=s=>{const a=s.price,l=s.product.eventDTOList.length>0?s.product.eventDTOList[0].discountPercent:0;return Math.round(a*(1-l/100))},Te=s=>s.product.eventDTOList.length>0;d.useEffect(()=>{var s,a,l;if(Se&&(n==null?void 0:n.address)!==i("address")){const h={recipientName:i("recipientName"),email:i("email"),phone:i("phone"),address:i("address"),provinceId:i("provinceId"),districtId:i("districtId"),wardId:i("wardId"),provinceName:(s=r.iprovince)==null?void 0:s.ProvinceName,districtName:(a=r.idistrict)==null?void 0:a.DistrictName,wardName:(l=r.iward)==null?void 0:l.WardName};console.log(h.email),W(h)}},[De]);const Oe=async s=>{event==null||event.preventDefault();const a={idCartId:x,voucherCode:s.voucherCode};m.post("cart/use-voucher",a).then(function(l){l.status===200&&l.data&&(A(l.data),C("Sử dụng thành công"))}).catch(function(l){console.log(l),C(l.response.data.error,"Thông báo","warning",5e3)})},Re=async()=>{var a,l,h,t,v,c;let s=!0;if(await m.get(`/cart/allow-convert/${x}`).then(function(o){o.status===200&&console.log("OKOK ALLOW CONVERT")}).catch(function(o){var N,f,D,T;console.log("ERRORR",o),(f=(N=o==null?void 0:o.response)==null?void 0:N.data)!=null&&f.error&&C((T=(D=o==null?void 0:o.response)==null?void 0:D.data)==null?void 0:T.error,"Thông báo","warning",5e3),s=!1}).finally(()=>{console.log("allow convert: ",s)}),H(!1),s){if(y==="CASH")try{const o={status:"PENDING",payment:y,recipientName:i("recipientName"),email:i("email"),phone:i("phone"),address:i("address"),provinceId:i("provinceId"),districtId:i("districtId"),wardId:i("wardId"),provinceName:(a=r.iprovince)==null?void 0:a.ProvinceName,districtName:(l=r.idistrict)==null?void 0:l.DistrictName,wardName:(h=r.iward)==null?void 0:h.WardName};await W(o),m.put(`/cart/v2/${x}`,o).then(function(N){N.status===200&&N.data&&(m.get(`/orders/convert/${x}`).then(function(f){f.status===200&&f.data&&(V(),J(),location.href="/thank",console.log("Xóa cart id ở convert"),localStorage.removeItem("myCartId"))}),V())})}catch(o){console.error("Error processing payment:",o)}else if(y==="TRANSFER"){const o={status:"PENDING",payment:y,recipientName:i("recipientName"),email:i("email"),phone:i("phone"),address:i("address"),provinceId:i("provinceId"),districtId:i("districtId"),wardId:i("wardId"),provinceName:(t=r.iprovince)==null?void 0:t.ProvinceName,districtName:(v=r.idistrict)==null?void 0:v.DistrictName,wardName:(c=r.iward)==null?void 0:c.WardName};m.put(`/cart/v2/${x}`,o).then(function(N){N.status===200&&N.data&&m.get(`/orders/convert/${x}`).then(function(f){if(f.status===200&&f.data){const D=f.data.id,T=Math.round(n.total);m.get(`/payment/vn-pay?amount=${T}&currency=VND&returnUrl=http://localhost:5173/client/payment/callback&idOrder=${D}`).then(function(w){var F,re;if(w.status===200&&w.data){J();const le=(re=(F=w==null?void 0:w.data)==null?void 0:F.data)==null?void 0:re.paymentUrl;le&&(window.location.href=le)}})}})})}}},Ae=Ge(Ce,500);function Ce(s){console.log(s),typeof s=="string"&&(s.length>1||s.length===0)&&(I(a=>({...a,address:s})),p("address",s))}const Pe=s=>{Ae(s.target.value)},W=async s=>{m.put(`/cart/v2/${x}`,s).then(function(a){a.status===200&&a.data&&V()})},Ee=async()=>{await m.get(`/cart/unlink-voucher/${x}`).then(function(s){s.status===200&&s.data&&A(s.data)})},V=async()=>{m.get(`cart/detail/${x}`).then(function(s){var a,l,h;if(s.status===200&&s.data){A(s.data),z(s.data.payment);const t=s.data;if(console.log("----------------"),console.log(t),p("recipientName",(t==null?void 0:t.recipientName)??""),p("email",(t==null?void 0:t.email)??""),p("phone",(t==null?void 0:t.phone)??""),p("address",(t==null?void 0:t.address)??""),p("provinceId",((a=t==null?void 0:t.provinceId)==null?void 0:a.toString())??""),p("districtId",((l=t==null?void 0:t.districtId)==null?void 0:l.toString())??""),p("wardId",((h=t==null?void 0:t.wardId)==null?void 0:h.toString())??""),(t==null?void 0:t.provinceId)!==void 0&&(t==null?void 0:t.provinceId)!==null){const v=t==null?void 0:t.provinceId.toString();te(v)}if((t==null?void 0:t.districtId)!==void 0&&(t==null?void 0:t.districtId)!==null){const v=t==null?void 0:t.districtId.toString();ae(v)}s.data.voucherResponseDTO&&Y("voucherCode",s.data.voucherResponseDTO.code)}})};d.useEffect(()=>{be(),m.get(`cart-details/in-cart/${x}`).then(function(s){s!=null&&s.data&&G(s==null?void 0:s.data)}).catch(function(s){console.log(s.response.data.error==="cart not found")}),Me(),V(),g(!1)},[]),d.useEffect(()=>{var s,a,l,h;if(console.log("++++++++++++++++"),console.log(r),r.iprovince&&(console.log("Change provine"),te(r.iprovince.ProvinceID),r.idistrict&&(console.log("Change district"),ae(r.idistrict.DistrictID),r.iward))){console.log("Change iward");const t={payment:y,recipientName:i("recipientName"),email:i("email"),phone:i("phone"),address:i("address"),districtId:(s=r.idistrict)==null?void 0:s.DistrictID,districtName:(a=r.idistrict)==null?void 0:a.DistrictName,provinceId:r.iprovince.ProvinceID,provinceName:r.iprovince.ProvinceID,wardId:(l=r.iward)==null?void 0:l.WardCode,wardName:(h=r.iward)==null?void 0:h.WardName};W(t)}},[r]);const Me=async()=>{const s=await Ue();$(s)},te=async s=>{const a=await Qe(s);X(a)},ae=async s=>{const a=await Ke(s);q(a)},Ve=async s=>{z(s),await W({payment:s})},{user:_,setUser:ts}=ue(),Fe=()=>e.jsx("div",{className:"lg:flex items-center justify-between mb-4",children:e.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[e.jsx("li",{children:e.jsx("div",{className:"flex items-center",children:e.jsx("a",{href:"/",className:"text-gray-700 hover:text-blue-600",children:"Trang Chủ"})})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(Ze,{to:`/checkout/${x}`,className:"text-gray-700 hover:text-blue-600",children:"Thanh toán"})]})})]})})}),Le=()=>{const[s,a]=d.useState([]),[l,h]=d.useState(""),t=async()=>{m.get("/address/my-address").then(function(c){console.log(c),c.status===200&&(console.log("MY ADDRESS"),console.log(c.data),a(c.data))})};d.useEffect(()=>{t()},[]),d.useEffect(()=>{const c=s.find(o=>o.isDefault);c&&(console.log("DEFALUT ADDRESS ID",c==null?void 0:c.id),h(c==null?void 0:c.id.toString()))},[s]);const v=async()=>{l&&await m.get(`/cart/edit-my-address/${x}?addressId=${l}`).then(function(c){c.status===200&&(C("Cập nhật thành công"),V(),U(!1))})};return e.jsxs("div",{children:[e.jsx(P.Group,{vertical:!0,value:i("address")+i("phone").toString()+i("recipientName"),className:"w-full",children:s.length>0?s.map((c,o)=>e.jsx(P,{value:c.detail+c.phone+c.name,onClick:()=>h(c.id.toString()),children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-black",children:c.name}),"| ",c.phone]}),e.jsxs("div",{children:[c.detail,", ",c.ward,", ",c.district,", ",c.province]}),e.jsx("div",{children:c.isDefault&&e.jsx("p",{className:"text-[12px] text-blue-600 py-1",children:"Địa chỉ mặc định"})})]})},o)):e.jsx("div",{className:"py-5 text-center",children:e.jsx("p",{className:"text-[16px] font-semibold",children:"Quý khách không có bất kì địa chỉ nào khác"})})}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(Je,{size:"sm",onClick:v,children:"Xác nhận"})})]})};return e.jsxs("div",{className:"bg-white ",children:[je&&e.jsx("div",{className:"fixed top-0 left-0 bg-gray-500 bg-opacity-30 w-screen h-screen z-[40]",children:e.jsx("div",{className:"fixed top-1/2 left-1/2 w-3/6 bg-white -translate-x-1/2 -translate-y-1/2 z-50 shadow-2xl rounded",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"font-semibold text-[16px] text-black",children:"Địa chỉ của tôi"})}),e.jsx("div",{children:e.jsx(pe,{className:"text-xl",onClick:()=>U(!1)})})]}),e.jsx("div",{className:"p-3",children:e.jsx(Le,{})})]})})}),e.jsx("div",{className:"px-[2%] h-full",children:e.jsxs("form",{className:"py-10 grid grid-cols-12 gap-12 h-full",children:[e.jsx("div",{className:"order-2 md:order-1 h-full col-span-8 flex flex-col justify-start ",children:e.jsxs(d.Fragment,{children:[e.jsx("div",{className:"flex gap-1 justify-start items-center",children:e.jsxs("div",{className:"text-black font-semibold text-xl",children:["Xin chào ",(_==null?void 0:_.username)||"quý khách"]})}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(Fe,{})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-black font-semibold text-xl",children:e.jsx("p",{children:"Thông tin giao hàng"})}),e.jsx("div",{children:e.jsx("button",{type:"button",className:"p-2 border border-gray-300",onClick:()=>U(!0),children:"Chọn địa chỉ"})})]})]}),e.jsxs("div",{className:"grid 2xl:grid-cols-3 xl:grid-cols-1 gap-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("p",{className:" text-black text-[18px] font-semibold",children:"Họ và tên"}),e.jsx(L,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Họ và tên",...k("recipientName"),onChange:s=>{p("recipientName",s.target.value)}}),u.recipientName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.recipientName.message})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("p",{className:" text-black text-[18px] font-semibold",children:"Email"}),e.jsx(L,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Email",...k("email"),onChange:s=>{p("email",s.target.value)}}),u.recipientName&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.recipientName.message})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("p",{className:"  text-black text-[18px] font-semibold",children:"Số điện thoại"}),e.jsx(L,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Số điện thoại",...k("phone"),onChange:s=>{p("phone",s.target.value)}}),u.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.phone.message})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-black text-[18px] font-semibold",children:"Tỉnh thành"}),e.jsx(Z,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",options:R,placeholder:"Tỉnh/thành",...k("provinceId"),onChange:s=>{I(a=>({...a,iprovince:s})),p("provinceId",s.ProvinceID)},value:R.find(s=>{var a;return((a=i("provinceId"))==null?void 0:a.toString())===s.ProvinceID.toString()})??null}),u.provinceId&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.provinceId.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:"  text-black text-[18px] font-semibold",children:"Quận/huyện"}),e.jsx(Z,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",options:E,placeholder:"Quận/huyện",...k("districtId"),onChange:s=>{I(a=>({...a,idistrict:s})),p("districtId",s.DistrictID)},value:E.find(s=>{var a;return((a=i("districtId"))==null?void 0:a.toString())===s.DistrictID.toString()})??null}),u.districtId&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.districtId.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:"  text-black text-[18px] font-semibold",children:"Xã/phường"}),e.jsx(Z,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",options:B,placeholder:"Xã/phường",...k("wardId"),onChange:s=>{I(a=>({...a,iward:s})),p("wardId",s.WardCode)},value:B.find(s=>{var a;return((a=i("wardId"))==null?void 0:a.toString())===s.WardCode.toString()})??null}),u.wardId&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.wardId.message})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"  text-black text-[18px] font-semibold",children:"Địa chỉ"}),e.jsx(L,{className:"border-2 rounded-lg shadow-sm border-gray-300 p-3 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Địa chỉ",...k("address"),onChange:s=>{Pe(s)}}),u.address&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u.address.message})]}),e.jsxs("div",{children:[e.jsx("div",{className:"py-2 text-black font-semibold text-[18px]",children:e.jsx("p",{children:"Phương thức vận chuyển"})}),e.jsx(oe,{className:"border-2 rounded-lg shadow-sm border-gray-300",children:e.jsx(P,{checked:!0,children:"Vận chuyển"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"py-2 text-black font-semibold text-[18px]",children:"Phương thức thanh toán"}),e.jsx(oe,{className:"border-2 rounded-lg shadow-sm border-gray-300",children:e.jsxs(P.Group,{vertical:!0,className:"gap-1",value:y,onChange:Ve,children:[e.jsx(P,{value:he.TRANSFER,checked:(n==null?void 0:n.payment)==="TRANSFER",children:"Thanh toán ngân hàng"}),e.jsx(P,{value:he.CASH,checked:(n==null?void 0:n.payment)==="CASH",children:"Thanh toán khi nhận hàng"})]})})]})]})]})}),e.jsx("div",{className:"order-1 md:order-2 h-full col-span-4",children:e.jsx("div",{className:"grid",children:e.jsxs("div",{className:"dark:text-gray-500 bg-white flex flex-col justify-between ",children:[e.jsx("div",{className:"overflow-y-auto",children:e.jsx("div",{className:"px-2 max-h-[800px]",children:Array.isArray(b)&&b.length>0?b.map((s,a)=>{var l,h,t,v,c,o,N,f,D,T,w,F;return e.jsx(d.Fragment,{children:e.jsxs("div",{className:"flex justify-between gap-6 border-b border-gray-300 py-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_e,{content:s==null?void 0:s.quantity,maxCount:9999,children:e.jsx("div",{className:"w-28 h-28",children:(h=(l=s.productDetailResponseDTO)==null?void 0:l.images[0])!=null&&h.url?e.jsx("img",{src:(t=s.productDetailResponseDTO.images[0])==null?void 0:t.url,className:"w-full h-full object-cover rounded-lg",alt:""}):e.jsx("img",{src:"https://t4.ftcdn.net/jpg/04/99/93/31/360_F_499933117_ZAUBfv3P1HEOsZDrnkbNCt4jc3AodArl.jpg",className:"w-full h-full object-cover rounded-lg",alt:""})})})}),e.jsx("div",{className:"flex flex-col justify-between w-full",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-sm",children:["Sản phẩm: ",e.jsx("span",{className:"text-gray-800",children:(c=(v=s.productDetailResponseDTO)==null?void 0:v.product)==null?void 0:c.name})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[e.jsx("p",{children:e.jsx("span",{className:"text-gray-800",children:(N=(o=s.productDetailResponseDTO)==null?void 0:o.color)==null?void 0:N.name})}),e.jsxs("p",{children:["Size: ",e.jsx("span",{className:"text-gray-800",children:(D=(f=s.productDetailResponseDTO)==null?void 0:f.size)==null?void 0:D.name})]}),e.jsxs("p",{children:["Thương hiệu: ",e.jsx("span",{className:"text-gray-800",children:(w=(T=s.productDetailResponseDTO)==null?void 0:T.brand)==null?void 0:w.name})]}),e.jsxs("p",{children:["Đơn giá:"," ",e.jsx("span",{className:`text-red-600 ${Te(s.productDetailResponseDTO)?"line-through":""}`,children:Math.round((F=s.productDetailResponseDTO)==null?void 0:F.price).toLocaleString("vi-VN")+"₫"})]}),s.productDetailResponseDTO.product.eventDTOList.length>0&&e.jsxs("p",{children:["Giá khuyến mãi:"," ",e.jsx("span",{className:"text-red-600",children:se(s.productDetailResponseDTO).toLocaleString("vi-VN")+"₫"})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("div",{}),e.jsx("span",{className:"font-semibold text-red-600 text-lg",children:Math.round(se(s.productDetailResponseDTO)*(s==null?void 0:s.quantity)).toLocaleString("vi-VN")+"₫"})]})]})},a)}):e.jsx(d.Fragment,{children:e.jsxs("div",{className:"flex flex-col justify-center items-center h-full",children:[e.jsx("div",{children:e.jsx("img",{className:"w-28 h-28 object-cover",src:"/img/OIP-removebg-preview.png",alt:"No product image"})}),e.jsx("div",{children:e.jsx("span",{className:"font-light text-gray-500",children:"Không có sản phẩm nào trong giỏ hàng"})})]})})})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"py-2 text-black font-semibold text-[18px]",children:"Thông tin thanh toán"}),e.jsxs("form",{className:"grid grid-cols-12 gap-4 w-full py-4",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx(L,{placeholder:"Mã giảm giá",className:`border-2  rounded-none border-gray-200  ${K.voucherCode?"border-red-500":""}`,...we("voucherCode",{required:"Mã giảm giá không hợp lệ",minLength:{value:5,message:"Mã giảm giá phải có ít nhất 5 ký tự"}})}),K.voucherCode&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:K.voucherCode.message})]}),e.jsx("div",{className:"col-span-6",children:e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("button",{className:"border-2 w-full h-[38px] rounded-none border-black text-black",onClick:Ie(Oe),children:"Sử dụng"}),(n==null?void 0:n.voucherResponseDTO)&&e.jsx("button",{type:"button",className:"border-2 w-full h-[38px] rounded-none border-black text-black",onClick:Ee,children:"Bỏ gán"})]})})]}),e.jsx("div",{className:"text-sm text-blue-600 cursor-pointer mt-2",onClick:Q,children:"Xem thêm mã giảm giá"}),e.jsx("div",{className:"mt-4",children:j&&e.jsx(es,{setIsVoucherModalOpen:M,isVoucherModalOpen:j,toggleVoucherModal:Q,onVoucherSelect:Ne})}),S&&e.jsxs("div",{className:"mt-4 p-4 border rounded bg-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("div",{children:e.jsx("h2",{className:"font-semibold text-lg",children:"Phiếu giảm giá đã chọn"})})}),e.jsxs("p",{children:["Tên: ",S.name]}),e.jsxs("p",{children:["Mã: ",S.code]}),e.jsxs("p",{children:["Phần trăm giảm: ",S.maxPercent,"%"]}),e.jsxs("p",{children:["Số tiền tối thiểu: ",S.minAmount.toLocaleString("vi-VN"),"₫"]})]}),e.jsxs("div",{className:"py-2 flex justify-between",children:[e.jsx("span",{children:"Tạm tính:"}),e.jsxs("span",{className:"text-red-500 font-semibold",children:[((ne=n==null?void 0:n.subTotal)==null?void 0:ne.toLocaleString("vi"))??"n/a","₫"]})]}),e.jsxs("div",{className:"py-2 flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("p",{children:"Phí vận chuyển"}),e.jsx("img",{src:"https://cdn.haitrieu.com/wp-content/uploads/2022/05/Logo-GHN-Blue-Orange-350x88.png",width:"60px"})]}),e.jsxs("span",{className:"text-red-500 font-semibold",children:["+ ",((ie=n==null?void 0:n.deliveryFee)==null?void 0:ie.toLocaleString("vi"))??"0","₫"]})]}),e.jsxs("div",{className:"py-2 flex justify-between",children:[e.jsx("span",{children:"Giảm giá:"}),e.jsxs("span",{className:"text-red-500 font-semibold",children:["- ",((ce=n==null?void 0:n.discount)==null?void 0:ce.toLocaleString("vi"))??"0","₫"]})]}),e.jsxs("div",{className:"py-2 flex justify-between",children:[e.jsx("span",{children:"Tổng tiền:"}),e.jsxs("span",{className:"text-red-500 font-semibold",children:[((de=n==null?void 0:n.total)==null?void 0:de.toLocaleString("vi"))??"0","₫"]})]}),e.jsxs(e.Fragment,{children:[e.jsx(ss,{isOpen:ve,onClose:()=>H(!1),onConfirm:()=>{ee(Re)(),H(!1)}}),e.jsx("button",{type:"button",className:"bg-black w-full py-2 font-thin rounded-none text-white",onClick:()=>{ee(()=>{H(!0)})()},children:"Xác nhận đơn hàng"})]})]})]})})})]})})]})};export{is as default};
