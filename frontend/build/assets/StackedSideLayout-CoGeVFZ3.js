import{r as p,i as A,j as e,S as L,a as K,M,L as b,N as T,b as H,c as C,d as w,H as V,B as $,D,e as O,f as I,g as P,u as c,h as E,k as F}from"./index-D8wAv7Ri.js";import{u as B,n as _,N as U,L as G,A as W,c as g,V as Y,d as z,e as q,H as J,R as Q,M as X,b as Z,U as ee}from"./ClassicLayout-CF154tbn.js";const se=h=>{const{navMode:n,onChange:l,routeKey:x,activeKeys:d,onSetActiveKey:u,userAuthority:r,mode:o,direction:m,...i}=h,{includedRouteTree:a}=B(_,x),j=()=>n===T?H:n===C?o:n,S=({key:t,title:f,menu:v,translateKey:k})=>{l({title:f,menu:v,translateKey:k}),u([t])},N=({key:t})=>{l({}),u([t])};return p.useEffect(()=>{a.type!==U&&!A(a)&&l({key:a.key,title:a.title,menu:a.subMenu,translateKey:a.translateKey})},[a.key]),e.jsxs("div",{...i,children:[e.jsx(G,{mode:j(),type:"streamline",className:L}),e.jsx(K,{autoHide:!0,direction:m,children:e.jsx(M,{className:"px-4 pb-4",variant:n,defaultActiveKeys:d||[a.key],children:_.map(t=>e.jsx(W,{authority:t.authority,userAuthority:r,children:t.subMenu&&t.subMenu.length>0?e.jsx(M.MenuItem,{eventKey:t.key,className:"mb-2",onSelect:()=>S({key:t.key,title:t.title,menu:t.subMenu,translateKey:t.translateKey}),children:e.jsx("div",{className:"text-2xl",children:g[t.icon]})}):e.jsx(b,{to:t.path,className:"flex items-center h-full w-full",onClick:()=>N({key:t.key}),children:e.jsx(M.MenuItem,{eventKey:t.key,className:"mb-2",children:e.jsx("div",{className:"text-2xl",children:g[t.icon]})})})},t.key))})})]})},te=h=>{const{className:n,title:l,menu:x,routeKey:d,onCollapse:u,direction:r,userAuthority:o,navMode:m,...i}=h,a=()=>{u()};return e.jsxs("div",{className:w("h-full",n),...i,children:[e.jsxs("div",{className:`${V} flex items-center justify-between gap-4 pl-6 pr-4`,children:[e.jsx("h5",{className:"font-bold",children:l}),e.jsx($,{shape:"circle",variant:"plain",size:"sm",icon:e.jsxs(e.Fragment,{children:[r===D&&e.jsx(O,{}),r===I&&e.jsx(P,{})]}),onClick:a})]}),e.jsx(K,{autoHide:!0,direction:r,children:e.jsx(Y,{routeKey:d,navigationTree:x,userAuthority:o,navMode:m})})]})},ae={width:F},ne=()=>{const{t:h}=z(),[n,l]=p.useState({}),[x,d]=p.useState([]),u=c(s=>s.theme.themeColor),r=c(s=>s.theme.primaryColorLevel),o=c(s=>s.theme.navMode),m=c(s=>s.theme.mode),i=c(s=>s.theme.direction),a=c(s=>s.base.common.currentRouteKey),j=c(s=>s.auth.user.authority),{larger:S}=q(),N=(s,y,R=!0)=>o===T&&R?`bg-${u}-${r} ${s}-${y}`:`${s}-${y}`,t=s=>{l(s)},f=()=>{l({}),d([])},v=s=>{d(s)},k=()=>{let s={};const y=`${-E}px`;return i===D&&(s={marginLeft:y}),i===I&&(s={marginRight:y}),s};return e.jsx(e.Fragment,{children:S.md&&e.jsxs("div",{className:"stacked-side-nav",children:[e.jsx(se,{className:`stacked-side-nav-mini ${N("stacked-side-nav-mini",o)}`,style:ae,routeKey:a,activeKeys:x,navMode:o,userAuthority:j,mode:m,direction:i,onChange:t,onSetActiveKey:v}),e.jsx("div",{className:`stacked-side-nav-secondary ${N("stacked-side-nav-secondary",m,!1)}`,style:{width:E,...A(n)?k():{}},children:!A(n)&&e.jsx(te,{title:h(n.translateKey,n.title),menu:n.menu,routeKey:a,navMode:C,direction:i,userAuthority:j,onCollapse:f})})]})})},le=()=>e.jsx(e.Fragment,{children:e.jsx(X,{})}),ie=()=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{}),e.jsx(ee,{hoverable:!1})]}),ce=()=>e.jsx("div",{className:"app-layout-stacked-side flex flex-auto flex-col",children:e.jsxs("div",{className:"flex flex-auto min-w-0",children:[e.jsx(ne,{}),e.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[e.jsx(J,{className:"shadow dark:shadow-2xl",headerStart:e.jsx(le,{}),headerEnd:e.jsx(ie,{})}),e.jsx("div",{className:"h-full flex flex-auto flex-col",children:e.jsx(Q,{})})]})]})});export{ce as default};
